<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Red Hat Ansible Automation Platform Installation Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article Role ARG Spec">
<div id="header">
<h1>Red Hat Ansible Automation Platform Installation Guide</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Thank you for your interest in Red Hat Ansible Automation Platform. Ansible Automation Platform is a commercial offering that helps teams manage complex multi-tier deployments by adding control, knowledge, and delegation to Ansible-powered environments.</p>
</div>
<div class="paragraph">
<p>This guide helps you to understand the installation requirements and processes behind installing Ansible Automation Platform. This document has been updated to include information for the latest release of Ansible Automation Platform.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="making-open-source-more-inclusive">Making open source more inclusive</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat is committed to replacing problematic language in our code, documentation, and web properties.
We are beginning with these four terms: master, slave, blacklist, and whitelist.
Because of the enormity of this endeavor, these changes will be implemented gradually over several upcoming releases.
For more details, see <a href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language">our CTO Chris Wright&#8217;s message</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="providing-feedback">Providing feedback on Red Hat documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have a suggestion to improve this documentation, or find an error, please contact technical support at <a href="https://access.redhat.com">https://access.redhat.com</a> to create an issue on the Ansible Automation Platform Jira project using the <strong>docs-product</strong> component.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-platform-install-overview">1. Red Hat Ansible Automation Platform installation overview</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>The Red Hat Ansible Automation Platform installation program offers you flexibility, allowing you to install Ansible Automation Platform by using a number of supported installation scenarios. Starting with Ansible Automation Platform 2.4, the installation scenarios include the optional deployment of Event-Driven Ansible controller, which introduces the automated resolution of IT requests.</p>
</div>
<div class="paragraph">
<p>Regardless of the installation scenario you choose, installing Ansible Automation Platform involves the following steps:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#proc-editing-installer-inventory-file_platform-install-scenario">Editing the Red Hat Ansible Automation Platform installer inventory file</a></dt>
<dd>
<p>The Ansible Automation Platform installer inventory file allows you to specify your installation scenario and describe host deployments to Ansible. The examples provided in this document show the parameter specifications needed to install that scenario for your deployment.</p>
</dd>
<dt class="hdlist1"><a href="#proc-running-setup-script_platform-install-scenario">Running the Red Hat Ansible Automation Platform installer setup script</a></dt>
<dd>
<p>The setup script installs your private automation hub by using the required parameters defined in the inventory file.</p>
</dd>
<dt class="hdlist1"><a href="#proc-verify-controller-installation_platform-install-scenario">Verifying automation controller installation</a></dt>
<dd>
<p>After installing Ansible Automation Platform, you can verify that the installation has been successful by logging in to the automation controller.</p>
</dd>
<dt class="hdlist1"><a href="#proc-verify-hub-installation_platform-install-scenario">Verifying automation hub installation</a></dt>
<dd>
<p>After installing Ansible Automation Platform, you can verify that the installation has been successful by logging in to the automation hub.</p>
</dd>
<dt class="hdlist1"><a href="#proc-verify-eda-controller-installation_platform-install-scenario">Verifying Event-Driven Ansible controller installation</a></dt>
<dd>
<p>After installing Ansible Automation Platform, you can verify that the installation has been successful by logging in to the Event-Driven Ansible controller.</p>
</dd>
<dt class="hdlist1"><a href="#assembly-platform-whats-next_platform-install-scenario">Post-installation steps</a></dt>
<dd>
<p>After successful installation, you can begin using the features of Ansible Automation Platform.</p>
</dd>
</dl>
</div>
<div class="paragraph _additional-resources">
<div class="title">Additional resources</div>
<p>For more information about the supported installation scenarios, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_planning_guide/index">Red Hat Ansible Automation Platform Planning Guide</a>.</p>
</div>
<div class="sect2">
<h3 id="aap-installation-prereqs">1.1. Prerequisites</h3>
<div class="ulist _abstract">
<ul>
<li>
<p>You chose and obtained a platform installer from the <a href="https://access.redhat.com/downloads/content/480/ver=2.4/rhel---9/2.4/x86_64/product-software">Red Hat Ansible Automation Platform Product Software</a>.</p>
</li>
<li>
<p>You are installing on a machine that meets base system requirements.</p>
</li>
<li>
<p>You have updated all of the packages to the recent version of your RHEL nodes.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
To prevent errors, upgrade your RHEL nodes fully before installing Ansible Automation Platform.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>You have created a Red Hat Registry Service Account, by using the instructions in <a href="https://access.redhat.com/RegistryAuthentication#creating-registry-service-accounts-6">Creating Registry Service Accounts</a>.</p>
</li>
</ul>
</div>
<div class="paragraph _additional-resources">
<div class="title">Additional resources</div>
<p>For more information about obtaining a platform installer or system requirements, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_planning_guide/platform-system-requirements">Red Hat Ansible Automation Platform system requirements</a> in the <em>Red Hat Ansible Automation Platform Planning Guide</em>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="platform-system-requirements">2. System requirements</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Use this information when planning your Red Hat Ansible Automation Platform installations and designing automation mesh topologies that fit your use case.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must be able to obtain root access either through the <code>sudo</code> command, or through privilege escalation. For more on privilege escalation see <a href="https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_privilege_escalation.html">Understanding Privilege Escalation</a>.</p>
</li>
<li>
<p>You must be able to de-escalate privileges from root to users such as: AWX, PostgreSQL, Event-Driven Ansible, or Pulp.</p>
</li>
<li>
<p>You must configure an NTP client on all nodes. For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_upgrade_and_migration_guide/migrate-isolated-execution-nodes#automation_controller_configuration_requirements">Configuring NTP server using Chrony</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_red_hat_ansible_automation_platform_system_requirements">2.1. Red Hat Ansible Automation Platform system requirements</h3>
<div class="paragraph">
<p>Your system must meet the following minimum system requirements to install and run Red Hat Ansible Automation Platform.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Base system</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Subscription</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Valid Red Hat Ansible Automation Platform</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">OS</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat Enterprise Linux 8.6 or later 64-bit (x86, ppc64le, s390x, aarch64)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat Ansible Automation Platform is also supported on OpenShift, see <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/deploying_the_red_hat_ansible_automation_platform_operator_on_openshift_container_platform/index">Deploying the Red Hat Ansible Automation Platform operator on OpenShift Container Platform</a> for more information.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Ansible</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>version 2.14 (to install)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Automation Platform ships with execution environments that contain ansible-core 2.15.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Python</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>3.8 or later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Browser</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A currently supported version of Mozilla FireFox or Google Chrome</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Database</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>PostgreSQL version 13</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following are necessary for you to work with project updates and collections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_planning_guide/ref-network-ports-protocols_planning">network ports and protocols</a> listed in <em>Table 5.9. Automation Hub</em> are available for successful connection and download of collections from automation hub or Ansible Galaxy server.</p>
</li>
<li>
<p>SSL inspection must be disabled either when using self signed certificates or for the Red Hat domains.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The requirements for systems managed by Ansible Automation Platform are the same as for Ansible.
See <a href="https://docs.ansible.com/ansible/latest/getting_started/index.html">Getting started with Ansible</a> in the Ansible <em>User Guide</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Additional notes for Red Hat Ansible Automation Platform requirements</div>
<ul>
<li>
<p>Although Red Hat Ansible Automation Platform depends on Ansible Playbooks and requires the installation of the latest stable version of Ansible before installing automation controller, manual installations of Ansible are no longer required.</p>
</li>
<li>
<p>For new installations, automation controller installs the latest release package of Ansible 2.14.</p>
</li>
<li>
<p>If performing a bundled Ansible Automation Platform installation, the installation program attempts to install Ansible (and its dependencies) from the bundle for you.</p>
</li>
<li>
<p>If you choose to install Ansible on your own, the Ansible Automation Platform installation program detects that Ansible has been installed and does not attempt to reinstall it.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You must install Ansible using a package manager such as <code>dnf</code>, and the latest stable version of the package manager must be installed for Red Hat Ansible Automation Platform to work properly.
Ansible version 2.14 is required for versions 2.4 and later.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ref-controller-system-requirements">2.2. Automation controller system requirements</h3>
<div class="paragraph">
<p>Automation controller is a distributed system, where different software components can be co-located or deployed across multiple compute nodes.
In the installer, node types of control, hybrid, execution, and hop are provided as abstractions to help you design the topology appropriate for your use case:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Execution nodes</dt>
<dd>
<p>Run automation. Increase memory and CPU to increase capacity for running more forks.</p>
</dd>
<dt class="hdlist1">Hop nodes</dt>
<dd>
<p>Serve to route traffic from one part of the Automation Mesh to another (for example, could be a bastion host into another network). RAM could affect throughput, CPU activity is low. Network bandwidth and latency are generally a more important factor than either RAM or CPU.</p>
</dd>
<dt class="hdlist1">Control nodes</dt>
<dd>
<p>Process events and runs cluster jobs including project updates and cleanup jobs. Increasing CPU and memory can help with job event processing.</p>
</dd>
<dt class="hdlist1">Hybrid nodes</dt>
<dd>
<p>Run both automation and cluster jobs. Comments on CPU and memory for execution and control nodes also apply to this node type.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Use the following recommendations for node sizing:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>On control and hybrid nodes, allocate a minimum of 20 GB to <code>/var/lib/awx</code> for execution environment storage.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Execution and hop nodes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>RAM</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>16 GB</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>CPUs</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Local disk</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>40GB minimum</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Control and hybrid nodes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>RAM</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>16 GB</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>CPUs</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Local disk</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>40GB minimum with at least 20GB available under /var/lib/awx</p>
</li>
<li>
<p>Storage volume must be rated for a minimum baseline of 1500 IOPS</p>
</li>
<li>
<p>Projects are stored on control and hybrid nodes, and for the duration of jobs, are also stored on execution nodes. If the cluster has many large projects, consider doubling the GB in /var/lib/awx/projects, to avoid disk space errors</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Actual RAM requirements vary based on how many hosts automation controller will manage simultaneously (which is controlled by the <code>forks</code> parameter in the job template or the system <code>ansible.cfg</code> file).
To avoid possible resource conflicts, Ansible recommends 1 GB of memory per 10 forks + 2 GB reservation for automation controller, see <a href="https://docs.ansible.com/automation-controller/latest/html/userguide/jobs.html#at-capacity-determination-and-job-impact">Automation controller Capacity Determination and Job Impact</a> for further details. If <code>forks</code> is set to 400, 42 GB of memory is recommended.</p>
</li>
<li>
<p>A larger number of hosts can of course be addressed, though if the fork number is less than the total host count, more passes across the hosts are required.
These RAM limitations are avoided when using rolling updates or when using the provisioning callback system built into automation controller, where each system requesting configuration enters a queue and is processed as quickly as possible; or in cases where automation controller is producing or deploying images such as AMIs.
All of these are great approaches to managing larger environments. For further questions, please contact Ansible support through the <a href="https://access.redhat.com/">Red Hat Customer portal</a>.</p>
</li>
</ul>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.ansible.com/automation-controller/latest/html/userguide/import_license.html?extIdCarryOver=true&amp;sc_cid=7013a00000388B5AAI">Import a subscription</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ref-automation-hub-requirements">2.3. Automation hub system requirements</h3>
<div class="paragraph">
<p>Automation hub enables you to discover and use new certified automation content from Red Hat Ansible and Certified Partners.
On Ansible automation hub, you can discover and manage Ansible Collections, which are supported automation content developed by Red Hat and its partners for use cases such as cloud automation, network automation, and security automation.</p>
</div>
<div class="paragraph">
<p>Automation hub has the following system requirements:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>RAM</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>8 GB minimum</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>8 GB RAM (minimum and recommended for Vagrant trial installations)</p>
</li>
<li>
<p>8 GB RAM (minimum for external standalone PostgreSQL databases)</p>
</li>
<li>
<p>For capacity based on forks in your configuration, see additional resources</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>CPUs</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2 minimum</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For capacity based on forks in your configuration, see additional resources.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Local disk</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>60 GB disk</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A minimum of 40GB should be dedicated to /var for collection storage.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Private automation hub</p>
</div>
<div class="paragraph">
<p>If you install private automation hub from an internal address, and have a certificate which only encompasses the external address, this can result in an installation which cannot be used as container registry without certificate issues.</p>
</div>
<div class="paragraph">
<p>To avoid this, use the <code>automationhub_main_url</code> inventory variable with a value like https://pah.example.com linking to the private automation hub node in the installation inventory file.</p>
</div>
<div class="paragraph">
<p>This adds the external address to <code>/etc/pulp/settings.py</code>.
This implies that you only want to use the external address.</p>
</div>
<div class="paragraph">
<p>For information on inventory file variables, see <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_installation_guide/appendix-inventory-files-vars">Inventory File Variables</a> in the <em>Red Hat Ansible Automation Platform Installation Guide</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-ha-hub-reqs">2.3.1. High availability automation hub requirements</h4>
<div class="paragraph">
<p>Before deploying a high availability (HA) automation hub, ensure that you have a shared filesystem installed in your environment and that you have configured your network storage system, if applicable.</p>
</div>
<div class="sect4">
<h5 id="_required_shared_filesystem">Required shared filesystem</h5>
<div class="paragraph">
<p>A high availability automation hub requires you to have a shared file system, such as NFS, already installed in your environment.
Before you run the Red Hat Ansible Automation Platform installer, verify that you installed the <code>/var/lib/pulp</code> directory across your cluster as part of the shared file system installation.
The Red Hat Ansible Automation Platform installer returns an error if <code>/var/lib/pulp</code> is not detected in one of your nodes, causing your high availability automation hub setup to fail.</p>
</div>
</div>
<div class="sect4">
<h5 id="_network_storage_installation_requirements">Network Storage Installation Requirements</h5>
<div class="paragraph">
<p>If you intend to install a HA automation hub using a network storage on the automation hub nodes itself, you must first install and use <code>firewalld</code> to open the necessary ports as required by your shared storage system before running the Ansible Automation Platform installer.</p>
</div>
<div class="paragraph">
<p>Install and configure <code>firewalld</code> by executing the following commands:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install the <code>firewalld</code> daemon:</p>
<div class="listingblock">
<div class="content">
<pre>$ dnf install firewalld</pre>
</div>
</div>
</li>
<li>
<p>Add your network storage under &lt;service&gt; using the following command:</p>
<div class="listingblock">
<div class="content">
<pre>$ firewall-cmd --permanent --add-service=&lt;service&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For a list of supported services, use the <code><strong>$ firewall-cmd --get-services</strong></code> command
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Reload to apply the configuration:</p>
<div class="listingblock">
<div class="content">
<pre>$ firewall-cmd --reload</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="event-driven-ansible-system-requirements">2.4. Event-Driven Ansible controller system requirements</h3>
<div class="paragraph">
<p>The Event-Driven Ansible controller is a single-node system capable of handling a variable number of long-running processes (such as, Rulebook activations) on-demand, depending on the number of CPU cores. Use the following minimum requirements to execute a maximum of 9 simultaneous activations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>RAM</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>16 GB</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>CPUs</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Local disk</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>40 GB minimum</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ref-postgresql-requirements">2.5. PostgreSQL requirements</h3>
<div class="paragraph">
<p>Red Hat Ansible Automation Platform uses PostgreSQL 13.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PostgreSQL user passwords are hashed with SCRAM-SHA-256 secure hashing algorithm before storing in the database.</p>
</li>
<li>
<p>To determine if your automation controller instance has access to the database, you can do so with the command, <code>awx-manage check_db</code>.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Database</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Service</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Database</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>20 GB dedicated hard disk space</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>150 GB+ recommended</p>
</li>
<li>
<p>Storage volume must be rated for a high baseline IOPS (1500 or more).</p>
</li>
<li>
<p>All automation controller data is stored in the database.
Database storage increases with the number of hosts managed, number of jobs run, number of facts stored in the fact cache, and number of tasks in any individual job.
For example, a playbook run every hour (24 times a day) across 250 hosts, with 20 tasks, will store over 800000 events in the database every week.</p>
</li>
<li>
<p>If not enough space is reserved in the database, old job runs and facts must be cleaned on a regular basis.
Refer to <a href="https://docs.ansible.com/ansible-tower/3.8.3/html/administration/management_jobs.html#ag-management-jobs">Management Jobs</a> in the <em>Automation Controller Administration Guide</em> for more information</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">PostgreSQL Configurations</div>
<p>Optionally, you can configure the PostgreSQL database as separate nodes that are not managed by the Red Hat Ansible Automation Platform installer.
When the Ansible Automation Platform installer manages the database server, it configures the server with defaults that are generally recommended for most workloads. See <a href="https://docs.ansible.com/automation-controller/latest/html/administration/performance.html#database-settings">Database Settings</a> for more information on the settings you can use to improve database performance.</p>
</div>
<div class="paragraph _additional-resources">
<div class="title">Additional resources</div>
<p>For more information on tuning your PostgreSQL server, see the <a href="https://wiki.postgresql.org/wiki/Main_Page">PostgreSQL documentation</a>.</p>
</div>
<div class="sect3">
<h4 id="proc-enable-hstore-extension">2.5.1. Enabling the hstore extension for the automation hub PostgreSQL database</h4>
<div class="paragraph">
<p>From Ansible Automation Platform 2.4, the database migration script uses <code>hstore</code> fields to store information, therefore the <code>hstore</code> extension to the automation hub PostgreSQL database must be enabled.</p>
</div>
<div class="paragraph">
<p>This process is automatic when using the Ansible Automation Platform installer and a managed PostgreSQL server.</p>
</div>
<div class="paragraph">
<p>However, when the PostgreSQL database is external, you must carry out this step manually before automation hub installation.</p>
</div>
<div class="paragraph">
<p>If the <code>hstore</code> extension is not enabled before automation hub installation, a failure is raised during database migration.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Check if the extension is available on the PostgreSQL server (automation hub database).</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ psql -d &lt;automation hub database&gt; -c "SELECT * FROM pg_available_extensions WHERE name='hstore'"</pre>
</div>
</div>
<div class="paragraph">
<p>Where the default value for <code>&lt;automation hub database&gt;</code> is <code>automationhub</code>.</p>
</div>
<div class="paragraph">
<p>This gives an output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">name  | default_version | installed_version |comment
------+-----------------+-------------------+---------------------------------------------------
 hstore | 1.7           |                   | data type for storing sets of (key, value) pairs
(1 row)</pre>
</div>
</div>
</li>
<li>
<p>This indicates that the <code>hstore</code> 1.7 extension is available, but not enabled.</p>
<div class="paragraph">
<p>If the <code>hstore</code> extension is not available on the PostgreSQL server, the result is similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"> name | default_version | installed_version | comment
------+-----------------+-------------------+---------
(0 rows)</pre>
</div>
</div>
</li>
<li>
<p>On a RHEL based server, the <code>hstore</code> extension is included in the <code>postgresql-contrib</code> RPM package, which is not installed automatically when installing the PostgreSQL server RPM package.</p>
<div class="paragraph">
<p>To install the RPM package, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">dnf install postgresql-contrib</pre>
</div>
</div>
</li>
<li>
<p>Create the <code>hstore</code> PostgreSQL extension on the automation hub database with the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ psql -d &lt;automation hub database&gt; -c "CREATE EXTENSION hstore"</pre>
</div>
</div>
<div class="paragraph">
<p>The output of which is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">CREATE EXTENSION</pre>
</div>
</div>
</li>
<li>
<p>In the following output, the <code>installed_version</code> field contains the <code>hstore</code> extension used, indicating that <code>hstore</code> is enabled.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">name | default_version | installed_version | comment
-----+-----------------+-------------------+------------------------------------------------------
hstore  |     1.7      |       1.7         | data type for storing sets of (key, value) pairs
(1 row)</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="benchmark-postgresql">2.5.2. Benchmarking storage performance for the Ansible Automation Platform PostgreSQL database</h4>
<div class="paragraph">
<p>The following procedure describes how to benchmark the write/read IOPS performance of the storage system to check whether the minimum Ansible Automation Platform PostgreSQL database requirements are met.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the Flexible I/O Tester (fio) storage performance benchmarking tool.</p>
<div class="paragraph">
<p>To install fio, run the following command as the root user:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap"># yum -y install fio</pre>
</div>
</div>
</li>
<li>
<p>You have adequate disk space to store the fio test data log files.</p>
<div class="paragraph">
<p>The examples shown in the procedure require at least 60GB disk space in the <code>/tmp</code> directory:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>numjobs</code> sets the number of jobs run by the command.</p>
</li>
<li>
<p><code>size=10G</code> sets the file size generated by each job.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>To reduce the amount of test data, adjust the value of the <code>size</code> parameter.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run a random write test:</p>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ fio --name=write_iops --directory=/tmp --numjobs=3 --size=10G \
--time_based --runtime=60s --ramp_time=2s --ioengine=libaio --direct=1 \
--verify=0 --bs=4K --iodepth=64 --rw=randwrite \
--group_reporting=1 &gt; /tmp/fio_benchmark_write_iops.log \
2&gt;&gt; /tmp/fio_write_iops_error.log</pre>
</div>
</div>
</li>
<li>
<p>Run a random read test:</p>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ fio --name=read_iops --directory=/tmp \
--numjobs=3 --size=10G --time_based --runtime=60s --ramp_time=2s \
--ioengine=libaio --direct=1 --verify=0 --bs=4K --iodepth=64 --rw=randread \
--group_reporting=1 &gt; /tmp/fio_benchmark_read_iops.log \
2&gt;&gt; /tmp/fio_read_iops_error.log</pre>
</div>
</div>
</li>
<li>
<p>Review the results:</p>
<div class="paragraph">
<p>In the log files written by the benchmark commands, search for the line beginning with <code>iops</code>.
This line shows the minimum, maximum, and average values for the test.</p>
</div>
<div class="paragraph">
<p>The following example shows the line in the log file for the random read test:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ cat /tmp/fio_benchmark_read_iops.log
read_iops: (g=0): rw=randread, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=64
[]
   iops        : min=50879, max=61603, avg=56221.33, stdev=679.97, samples=360
[]</pre>
</div>
</div>
<div class="paragraph">
<p>You must review, monitor, and revisit the log files according to your own business requirements, application workloads, and new demands.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-platform-install-scenario">3. Installing Red Hat Ansible Automation Platform</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Ansible Automation Platform is a modular platform. You can deploy automation controller with other automation platform components, such as automation hub and Event-Driven Ansible controller. For more information about the components provided with Ansible Automation Platform, see <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_planning_guide/planning-installation#ref-platform-components">Red Hat Ansible Automation Platform components</a> in the Red Hat Ansible Automation Platform Planning Guide.</p>
</div>
<div class="paragraph">
<p>There are several supported installation scenarios for Red Hat Ansible Automation Platform. To install Red Hat Ansible Automation Platform, you must edit the inventory file parameters to specify your installation scenario by using one of the following examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ref-standlone-platform-inventory_platform-install-scenario">Standalone automation controller with internal database</a></p>
</li>
<li>
<p><a href="#ref-single-controller-ext-installer-managed-db_platform-install-scenario">Single automation controller with external (installer managed) database</a></p>
</li>
<li>
<p><a href="#ref-single-controller-ext-customer-managed-db_platform-install-scenario">Single automation controller with external (customer provided) database</a></p>
</li>
<li>
<p><a href="#ref-standlone-platform-ext-database-inventory_platform-install-scenario">Ansible Automation Platform with an external (installer managed) database</a></p>
</li>
<li>
<p><a href="#ref-example-platform-ext-database-customer-provided_platform-install-scenario">Ansible Automation Platform with an external (customer provided) database</a></p>
</li>
<li>
<p><a href="#ref-single-eda-controller-with-internal-db_platform-install-scenario">Single Event-Driven Ansible controller node with internal database</a></p>
</li>
<li>
<p><a href="#ref-standlone-hub-inventory_platform-install-scenario">Standalone automation hub with internal database</a></p>
</li>
<li>
<p><a href="#ref-standlone-hub-ext-database-inventory_platform-install-scenario">Single automation hub with external (installer managed) database</a></p>
</li>
<li>
<p><a href="#ref-standalone-hub-ext-database-customer-provided_platform-install-scenario">Single automation hub with external (customer provided) database</a></p>
</li>
<li>
<p><a href="#ref-ldap-config-on-pah_platform-install-scenario">LDAP configuration on private automation hub</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="proc-editing-installer-inventory-file_platform-install-scenario">3.1. Editing the Red Hat Ansible Automation Platform installer inventory file</h3>
<div class="paragraph _abstract">
<p>You can use the Red Hat Ansible Automation Platform installer inventory file to specify your installation scenario.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the installer:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>[RPM installed package]</p>
<div class="listingblock">
<div class="content">
<pre>$ cd /opt/ansible-automation-platform/installer/</pre>
</div>
</div>
</li>
<li>
<p>[bundled installer]</p>
<div class="listingblock">
<div class="content">
<pre>$ cd ansible-automation-platform-setup-bundle-&lt;latest-version&gt;</pre>
</div>
</div>
</li>
<li>
<p>[online installer]</p>
<div class="listingblock">
<div class="content">
<pre>$ cd ansible-automation-platform-setup-&lt;latest-version&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Open the <code>inventory</code> file with a text editor.</p>
</li>
<li>
<p>Edit <code>inventory</code> file parameters to specify your installation scenario. Use one of the supported <a href="#con-install-scenario-examples">Installation scenario examples</a> to update your <code>inventory</code> file.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For a comprehensive list of pre-defined variables used in Ansible installation inventory files, see <a href="#appendix-inventory-files-vars">Inventory file variables</a>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="con-install-scenario-examples">3.1.1. Inventory file examples based on installation scenarios</h4>
<div class="paragraph _abstract">
<p>Red Hat supports several installation scenarios for Ansible Automation Platform. Review the following examples and select those suitable for your preferred installation scenario.</p>
</div>
<div class="sect4">
<h5 id="con-install-scenario-recommendations">Inventory file recommendations based on installation scenarios</h5>
<div class="paragraph _abstract">
<p>Before selecting your installation method for Ansible Automation Platform, review the following recommendations. Familiarity with these recommendations will streamline the installation process.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For Red Hat Ansible Automation Platform or automation hub: Add an automation hub host in the <code>[automationhub]</code> group.</p>
</li>
<li>
<p>For internal databases: <code>[database]</code> cannot be used to point to another host in the Ansible Automation Platform cluster.
The database host set to be installed needs to be a unique host.</p>
</li>
<li>
<p>Do not install automation controller and automation hub on the same node for versions of Ansible Automation Platform in a production or customer environment.
This can cause contention issues and heavy resource use.</p>
</li>
<li>
<p>Provide a reachable IP address or fully qualified domain name (FQDN) for the <code>[automationhub]</code> and <code>[automationcontroller]</code> hosts to ensure users can sync and install content from automation hub from a different node.
Do not use 'localhost'.</p>
</li>
<li>
<p>Use of special characters for <code>pg_password</code> is limited. The <code>!</code>, <code>#</code>, <code>0</code> and <code>@</code> characters are supported. Use of other special characters can cause the setup to fail.</p>
</li>
<li>
<p>Enter your Red Hat Registry Service Account credentials in <code>registry_username</code> and <code>registry_password</code> to link to the Red Hat container registry.</p>
</li>
<li>
<p>The inventory file variables <code>registry_username</code> and <code>registry_password</code> are only required if a non-bundle installer is used.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="ref-standlone-platform-inventory_platform-install-scenario">Standalone automation controller with internal database</h5>
<div class="paragraph _abstract">
<p>Use this example to populate the inventory file to install Red Hat Ansible Automation Platform.
This installation inventory file includes a single automation controller node with an internal database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[automationcontroller]
controller.example.com

[all:vars]
admin_password='&lt;password&gt;'
pg_host=''
pg_port='5432'
pg_database='awx'
pg_username='awx'
pg_password='&lt;password&gt;'
pg_sslmode='prefer'  # set to 'verify-full' for client-side enforced SSL

registry_url='registry.redhat.io'
registry_username='&lt;registry username&gt;'
registry_password='&lt;registry password&gt;'


# SSL-related variables
# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt
# Certificate and key to install in nginx for the web UI and API
# web_server_ssl_cert=/path/to/tower.cert
# web_server_ssl_key=/path/to/tower.key
# Server-side SSL settings for PostgreSQL (when we are installing it).
# postgres_use_ssl=False
# postgres_ssl_cert=/path/to/pgsql.crt
# postgres_ssl_key=/path/to/pgsql.key</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-single-controller-ext-installer-managed-db_platform-install-scenario">Single automation controller with external (installer managed) database</h5>
<div class="paragraph _abstract">
<p>Use this example to populate the inventory file to install Red Hat Ansible Automation Platform. This installation inventory file includes a single automation controller node with an external database on a separate node.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[automationcontroller]
controller.example.com

[database]
data.example.com

[all:vars]
admin_password='&lt;password&gt;'
pg_host='data.example.com'
pg_port='5432'
pg_database='awx'
pg_username='awx'
pg_password='&lt;password&gt;'
pg_sslmode='prefer'  # set to 'verify-full' for client-side enforced SSL

registry_url='registry.redhat.io'
registry_username='&lt;registry username&gt;'
registry_password='&lt;registry password&gt;'

# SSL-related variables
# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt
# Certificate and key to install in nginx for the web UI and API
# web_server_ssl_cert=/path/to/tower.cert
# web_server_ssl_key=/path/to/tower.key
# Server-side SSL settings for PostgreSQL (when we are installing it).
# postgres_use_ssl=False
# postgres_ssl_cert=/path/to/pgsql.crt
# postgres_ssl_key=/path/to/pgsql.key</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-single-controller-ext-customer-managed-db_platform-install-scenario">Single automation controller with external (customer provided) database</h5>
<div class="paragraph _abstract">
<p>Use this example to populate the inventory file to install Red Hat Ansible Automation Platform. This installation inventory file includes a single automation controller node with an external database on a separate node that is not managed by the platform installer.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>This example does not have a host under the database group. This indicates to the installer that the database already exists, and is being managed elsewhere.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>[automationcontroller]
controller.example.com

[database]

[all:vars]
admin_password='&lt;password&gt;'

pg_host='data.example.com'
pg_port='5432'
pg_database='awx'
pg_username='awx'
pg_password='&lt;password&gt;'
pg_sslmode='prefer'  # set to 'verify-full' for client-side enforced SSL

registry_url='registry.redhat.io'
registry_username='&lt;registry username&gt;'
registry_password='&lt;registry password&gt;'


# SSL-related variables
# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt
# Certificate and key to install in nginx for the web UI and API
# web_server_ssl_cert=/path/to/tower.cert
# web_server_ssl_key=/path/to/tower.key
# Server-side SSL settings for PostgreSQL (when we are installing it).
# postgres_use_ssl=False
# postgres_ssl_cert=/path/to/pgsql.crt
# postgres_ssl_key=/path/to/pgsql.key</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-standlone-platform-ext-database-inventory_platform-install-scenario">Ansible Automation Platform with an external (installer managed) database</h5>
<div class="paragraph _abstract">
<p>Use this example to populate the inventory file to install Ansible Automation Platform. This installation inventory file includes two automation controller nodes, two execution nodes, automation hub with an external managed database, and Event-Driven Ansible controller.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Automation Controller Nodes
# There are two valid node_types that can be assigned for this group.
# A node_type=control implies that the node will only be able to run
# project and inventory updates, but not regular jobs.
# A node_type=hybrid will have the ability to run everything.
# If you do not define the node_type, it defaults to hybrid.
#
# control.example node_type=control
# hybrid.example  node_type=hybrid
# hybrid2.example &lt;- this will default to hybrid

[automationcontroller]
controller1.example.com node_type=control
controller2.example.com node_type=control

# Execution Nodes
# There are two valid node_types that can be assigned for this group.
# A node_type=hop implies that the node will forward jobs to an execution node.
# A node_type=execution implies that the node will be able to run jobs.
# If you do not define the node_type, it defaults to execution.
#
# hop.example node_type=hop
# execution.example  node_type=execution
# execution2.example &lt;- this will default to execution

[execution_nodes]
execution1.example.com node_type=execution
execution2.example.com node_type=execution

[automationhub]
automationhub.example.com
[automationedacontroller]
eda.example.com
[database]
data.example.com

[all:vars]
admin_password='&lt;password&gt;'
pg_host='data.example.com'
pg_port='5432'
pg_database='awx'
pg_username='awx'
pg_password='&lt;password&gt;'
pg_sslmode='prefer'  # set to 'verify-full' for client-side enforced SSL

registry_url='registry.redhat.io'
registry_username='&lt;registry username&gt;'
registry_password='&lt;registry password&gt;'

# Receptor Configuration
#
receptor_listener_port=27199

# Automation Hub Configuration
#
automationhub_admin_password='&lt;password&gt;'
automationhub_pg_host='data.example.com
automationhub_pg_port='5432'
automationhub_pg_database='automationhub'
automationhub_pg_username='automationhub'
automationhub_pg_password='&lt;password&gt;'
automationhub_pg_sslmode='prefer'

# The default install will deploy a TLS enabled Automation Hub.
# If for some reason this is not the behavior wanted one can
# disable TLS enabled deployment.
#
# automationhub_disable_https = False
# The default install will generate self-signed certificates for the Automation
# Hub service. If you are providing valid certificate via automationhub_ssl_cert
# and automationhub_ssl_key, one should toggle that value to True.
#
# automationhub_ssl_validate_certs = False
# SSL-related variables
# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt
# Certificate and key to install in nginx for the web UI and API
# web_server_ssl_cert=/path/to/tower.cert
# web_server_ssl_key=/path/to/tower.key
# Certificate and key to install in Automation Hub node
# automationhub_ssl_cert=/path/to/automationhub.cert
# automationhub_ssl_key=/path/to/automationhub.key
# Server-side SSL settings for PostgreSQL (when we are installing it).
# postgres_use_ssl=False
# postgres_ssl_cert=/path/to/pgsql.crt
# postgres_ssl_key=/path/to/pgsql.key

# Automation EDA Controller Configuration
#

automationedacontroller_admin_password='&lt;eda-password&gt;'

automationedacontroller_pg_host='data.example.com'
automationedacontroller_pg_port=5432

automationedacontroller_pg_database='automationedacontroller'
automationedacontroller_pg_username='automationedacontroller'
automationedacontroller_pg_password='&lt;password&gt;'

# The full routable URL used by EDA to connect to a controller host.
# This URL is required if there is no Automation Controller configured
# in inventory.
#
# automation_controller_main_url=''

# Boolean flag used to verify Automation Controller's
# web certificates when making calls from Automation EDA Controller.
#
# automationedacontroller_controller_verify_ssl = true

# SSL-related variables

# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt

# Certificate and key to install in nginx for the web UI and API
# web_server_ssl_cert=/path/to/tower.cert
# web_server_ssl_key=/path/to/tower.key

# Certificate and key to install in Automation Hub node
# automationhub_ssl_cert=/path/to/automationhub.cert
# automationhub_ssl_key=/path/to/automationhub.key

# Server-side SSL settings for PostgreSQL (when we are installing it).
# postgres_use_ssl=False
# postgres_ssl_cert=/path/to/pgsql.crt
# postgres_ssl_key=/path/to/pgsql.key

# Keystore file to install in SSO node
# sso_custom_keystore_file='/path/to/sso.jks'

# The default install will deploy SSO with sso_use_https=True
# Keystore password is required for https enabled SSO
sso_keystore_password=''</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-example-platform-ext-database-customer-provided_platform-install-scenario">Ansible Automation Platform with an external (customer provided) database</h5>
<div class="paragraph _abstract">
<p>Use this example to populate the inventory file to install Red Hat Ansible Automation Platform. This installation inventory file includes one of each node type (control, hybrid, hop, and execution), automation hub with an external managed database that is not managed by the platform installer, and Event-Driven Ansible controller.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>This example does not have a host under the database group. This indicates to the installer that the database already exists, and is being managed elsewhere.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre># Automation Controller Nodes
# There are two valid node_types that can be assigned for this group.
# A node_type=control implies that the node will only be able to run
# project and inventory updates, but not regular jobs.
# A node_type=hybrid will have the ability to run everything.
# If you do not define the node_type, it defaults to hybrid.
#
# control.example node_type=control
# hybrid.example  node_type=hybrid
# hybrid2.example &lt;- this will default to hybrid

[automationcontroller]
hybrid1.example.com node_type=hybrid
controller1.example.com node_type=control

# Execution Nodes
# There are two valid node_types that can be assigned for this group.
# A node_type=hop implies that the node will forward jobs to an execution node.
# A node_type=execution implies that the node will be able to run jobs.
# If you do not define the node_type, it defaults to execution.
#
# hop.example node_type=hop
# execution.example  node_type=execution
# execution2.example &lt;- this will default to execution

[execution_nodes]
hop1.example.com node_type=hop
execution1.example.com node_type=execution

[automationhub]
automationhub.example.com
[automationedacontroller]
eda.example.com
[database]

[all:vars]
admin_password='&lt;password&gt;'
pg_host='data.example.com'
pg_port='5432'
pg_database='awx'
pg_username='awx'
pg_password='&lt;password&gt;'
pg_sslmode='prefer'  # set to 'verify-full' for client-side enforced SSL

registry_url='registry.redhat.io'
registry_username='&lt;registry username&gt;'
registry_password='&lt;registry password&gt;'

# Receptor Configuration
#
receptor_listener_port=27199

# Automation Hub Configuration
#
automationhub_admin_password='&lt;password&gt;'
automationhub_pg_host='data.example.com'
automationhub_pg_port='5432'
automationhub_pg_database='automationhub'
automationhub_pg_username='automationhub'
automationhub_pg_password='&lt;password&gt;'
automationhub_pg_sslmode='prefer'

# The default install will deploy a TLS enabled Automation Hub.
# If for some reason this is not the behavior wanted one can
# disable TLS enabled deployment.
#
# automationhub_disable_https = False
# The default install will generate self-signed certificates for the Automation
# Hub service. If you are providing valid certificate via automationhub_ssl_cert
# and automationhub_ssl_key, one should toggle that value to True.
#
# automationhub_ssl_validate_certs = False
# SSL-related variables
# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt
# Certificate and key to install in nginx for the web UI and API
# web_server_ssl_cert=/path/to/tower.cert
# web_server_ssl_key=/path/to/tower.key
# Certificate and key to install in Automation Hub node
# automationhub_ssl_cert=/path/to/automationhub.cert
# automationhub_ssl_key=/path/to/automationhub.key
# Server-side SSL settings for PostgreSQL (when we are installing it).
# postgres_use_ssl=False
# postgres_ssl_cert=/path/to/pgsql.crt
# postgres_ssl_key=/path/to/pgsql.key

# Automation EDA Controller Configuration
#

automationedacontroller_admin_password='&lt;eda-password&gt;'

automationedacontroller_pg_host='data.example.com'
automationedacontroller_pg_port=5432

automationedacontroller_pg_database='automationedacontroller'
automationedacontroller_pg_username='automationedacontroller'
automationedacontroller_pg_password='&lt;password&gt;'

# The full routable URL used by EDA to connect to a controller host.
# This URL is required if there is no Automation Controller configured
# in inventory.
#
# automation_controller_main_url=''

# Boolean flag used to verify Automation Controller's
# web certificates when making calls from Automation EDA Controller.
#
# automationedacontroller_controller_verify_ssl = true

# SSL-related variables

# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt

# Certificate and key to install in nginx for the web UI and API
# web_server_ssl_cert=/path/to/tower.cert
# web_server_ssl_key=/path/to/tower.key

# Certificate and key to install in Automation Hub node
# automationhub_ssl_cert=/path/to/automationhub.cert
# automationhub_ssl_key=/path/to/automationhub.key

# Server-side SSL settings for PostgreSQL (when we are installing it).
# postgres_use_ssl=False
# postgres_ssl_cert=/path/to/pgsql.crt
# postgres_ssl_key=/path/to/pgsql.key

# Keystore file to install in SSO node
# sso_custom_keystore_file='/path/to/sso.jks'

# The default install will deploy SSO with sso_use_https=True
# Keystore password is required for https enabled SSO
sso_keystore_password=''</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-single-eda-controller-with-internal-db_platform-install-scenario">Single Event-Driven Ansible controller node with internal database</h5>
<div class="paragraph">
<p>Use this example to populate the inventory file to install Event-Driven Ansible controller. This installation inventory file includes a single Event-Driven Ansible controller node with an internal database.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Event-Driven Ansible controller must be installed on a separate server and cannot be installed on the same host as automation hub and automation controller.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre># Automation EDA Controller Configuration
#

[automationedacontroller]
automationedacontroller.example.com ansible_connection=local

[all:vars]
automationedacontroller_admin_password='&lt;eda-password&gt;'

automationedacontroller_pg_host=''
automationedacontroller_pg_port=5432

automationedacontroller_pg_database='automationedacontroller'
automationedacontroller_pg_username='automationedacontroller'
automationedacontroller_pg_password='&lt;password&gt;'

# The full routable URL used by EDA to connect to a controller host.
# This URL is required if there is no automation controller configured
# in inventory.
#
automation_controller_main_url = 'https://controller.example.com/'

# Boolean flag used to verify Automation Controller's
# web certificates when making calls from Automation EDA Controller.
#
automationedacontroller_controller_verify_ssl = true</pre>
</div>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more details on Event-Driven Ansible, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/getting_started_with_event-driven_ansible_guide/index">Getting Started with Event-Driven Ansible Guide</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="ref-standlone-hub-inventory_platform-install-scenario">Standalone automation hub with internal database</h5>
<div class="paragraph _abstract">
<p>Use this example to populate the inventory file to deploy a standalone instance of automation hub with an internal database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[automationcontroller]


[automationhub]
automationhub.example.com ansible_connection=local

[all:vars]
registry_url='registry.redhat.io'
registry_username='&lt;registry username&gt;'
registry_password='&lt;registry password&gt;'

automationhub_admin_password= &lt;PASSWORD&gt;

automationhub_pg_host=''
automationhub_pg_port='5432'

automationhub_pg_database='automationhub'
automationhub_pg_username='automationhub'
automationhub_pg_password=&lt;PASSWORD&gt;
automationhub_pg_sslmode='prefer'

# The default install will deploy a TLS enabled Automation Hub.
# If for some reason this is not the behavior wanted one can
# disable TLS enabled deployment.
#
# automationhub_disable_https = False
# The default install will generate self-signed certificates for the Automation
# Hub service. If you are providing valid certificate via automationhub_ssl_cert
# and automationhub_ssl_key, one should toggle that value to True.
#
# automationhub_ssl_validate_certs = False
# SSL-related variables
# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt
# Certificate and key to install in Automation Hub node
# automationhub_ssl_cert=/path/to/automationhub.cert
# automationhub_ssl_key=/path/to/automationhub.key</pre>
</div>
</div>
<div class="sect5">
<h6 id="_connecting_automation_hub_to_a_red_hat_single_sign_on_environment">Connecting automation hub to a Red Hat Single Sign-On environment</h6>
<div class="paragraph">
<p>You can configure the inventory file further to connect automation hub to a Red Hat Single Sign-On installation.</p>
</div>
<div class="paragraph">
<p>You must configure a different set of variables when connecting to a Red Hat Single Sign-On installation managed by Ansible Automation Platform than when connecting to an external Red Hat Single Sign-On installation.</p>
</div>
<div class="paragraph">
<p>For more information about these inventory variables, refer to the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_installation_guide/appendix-inventory-files-vars#ref-hub-variables">Ansible automation hub variables</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ha-hub-installation">High availability automation hub</h5>
<div class="paragraph">
<p>Use the following examples to populate the inventory file to install a highly available automation hub. This inventory file includes a highly available automation hub with a clustered setup.</p>
</div>
<div class="paragraph">
<p>You can configure your HA deployment further to implement Red Hat Single Sign-On and enable a <a href="#proc-install-ha-hub-selinux">high availability deployment of automation hub on SELinux</a>.</p>
</div>
<div class="ulist">
<div class="title">Specify database host IP</div>
<ul>
<li>
<p>Specify the IP address for your database host, using the <code>automation_pg_host</code> and <code>automation_pg_port</code> inventory variables. For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>automationhub_pg_host='192.0.2.10'
automationhub_pg_port='5432'</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Also specify the IP address for your database host in the [database] section, using the value in the <code>automationhub_pg_host</code> inventory variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>[database]
192.0.2.10</pre>
</div>
</div>
<div class="ulist">
<div class="title">List all instances in a clustered setup</div>
<ul>
<li>
<p>If installing a clustered setup, replace <code>localhost ansible_connection=local</code> in the [automationhub] section with the hostname or IP of all instances. For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>[automationhub]
automationhub1.testing.ansible.com ansible_user=cloud-user ansible_host=192.0.2.18
automationhub2.testing.ansible.com ansible_user=cloud-user ansible_host=192.0.2.20
automationhub3.testing.ansible.com ansible_user=cloud-user ansible_host=192.0.2.22</pre>
</div>
</div>
<div class="paragraph _additional-resources">
<div class="title">Next steps</div>
<p>Check that the following directives are present in <code>/etc/pulp/settings.py</code> in each of the private automation hub servers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>USE_X_FORWARDED_PORT = True
USE_X_FORWARDED_HOST = True</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If <code>automationhub_main_url</code> is not specified, the first node in the [automationhub] group will be used as default.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="proc-install-ha-hub-selinux">Enabling a high availability (HA) deployment of automation hub on SELinux</h6>
<div class="paragraph">
<p>You can configure the inventory file to enable high availability deployment of automation hub on SELinux. You must create two mount points for <code>/var/lib/pulp</code> and <code>/var/lib/pulp/pulpcore_static</code>, and then assign the appropriate SELinux contexts to each.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You must add the context for <code>/var/lib/pulp</code> pulpcore_static and run the Ansible Automation Platform installer before adding the context for <code>/var/lib/pulp</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have already configured a NFS export on your server.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a mount point at <code>/var/lib/pulp</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ mkdir /var/lib/pulp/</pre>
</div>
</div>
</li>
<li>
<p>Open <code>/etc/fstab</code> using a text editor, then add the following values:</p>
<div class="listingblock">
<div class="content">
<pre>srv_rhel8:/data /var/lib/pulp nfs defaults,_netdev,nosharecache 0 0
srv_rhel8:/data/pulpcore_static /var/lib/pulp/pulpcore_static nfs defaults,_netdev,nosharecache,context="system_u:object_r:httpd_sys_content_rw_t:s0" 0 0</pre>
</div>
</div>
</li>
<li>
<p>Run the reload systemd manager configuration command:</p>
<div class="listingblock">
<div class="content">
<pre>$ systemctl daemon-reload</pre>
</div>
</div>
</li>
<li>
<p>Run the mount command for <code>/var/lib/pulp</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ mount /var/lib/pulp</pre>
</div>
</div>
</li>
<li>
<p>Create a mount point at <code>/var/lib/pulp/pulpcore_static</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ mkdir /var/lib/pulp/pulpcore_static</pre>
</div>
</div>
</li>
<li>
<p>Run the mount command:</p>
<div class="listingblock">
<div class="content">
<pre>$ mount -a</pre>
</div>
</div>
</li>
<li>
<p>With the mount points set up, run the Ansible Automation Platform installer:</p>
<div class="listingblock">
<div class="content">
<pre>$ setup.sh -- -b --become-user root</pre>
</div>
</div>
</li>
<li>
<p>After the installation is complete, unmount the <code>/var/lib/pulp/</code> mount point.</p>
</li>
</ol>
</div>
<div class="olist arabic _additional-resources">
<div class="title">Next steps</div>
<ol class="arabic">
<li>
<p><a href="#proc-apply-selinux-context">Apply the appropriate SELinux context</a>.</p>
</li>
<li>
<p><a href="#proc-configure-pulpcore-service">Configure the pulpcore.serivce</a>.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional Resources</div>
<ul>
<li>
<p>See the <a href="https://docs.pulpproject.org/en/2.16/user-guide/scaling.html#selinux-requirements">SELinux Requirements on the Pulp Project documentation</a> for a list of SELinux contexts.</p>
</li>
<li>
<p>See the <a href="https://docs.pulpproject.org/pulpcore/installation/hardware-requirements.html#filesystem-layout">Filesystem Layout</a> for a full description of Pulp folders.</p>
</li>
</ul>
</div>
<div class="sect6">
<h7 id="proc-apply-selinux-context">Applying the SELinux context</h7>
<div class="paragraph">
<p>After you have configured the inventory file, you must now apply the context to enable the high availability (HA) deployment of automation hub on SELinux.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Shut down the Pulp service:</p>
<div class="listingblock">
<div class="content">
<pre>$ systemctl stop pulpcore.service</pre>
</div>
</div>
</li>
<li>
<p>Unmount <code>/var/lib/pulp/pulpcore_static</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ umount /var/lib/pulp/pulpcore_static</pre>
</div>
</div>
</li>
<li>
<p>Unmount <code>/var/lib/pulp/</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ umount /var/lib/pulp/</pre>
</div>
</div>
</li>
<li>
<p>Open <code>/etc/fstab</code> using a text editor, then replace the existing value for <code>/var/lib/pulp</code> with the following:</p>
<div class="listingblock">
<div class="content">
<pre>srv_rhel8:/data /var/lib/pulp nfs defaults,_netdev,nosharecache,context="system_u:object_r:pulpcore_var_lib_t:s0" 0 0</pre>
</div>
</div>
</li>
<li>
<p>Run the mount command:</p>
<div class="listingblock">
<div class="content">
<pre>$ mount -a</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect6">
<h7 id="proc-configure-pulpcore-service">Configuring pulpcore.service</h7>
<div class="paragraph">
<p>After you have configured the inventory file, and applied the SELinux context, you now need to configure the pulp service.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>With the two mount points set up, shut down the Pulp service to configure <code>pulpcore.service</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ systemctl stop pulpcore.service</pre>
</div>
</div>
</li>
<li>
<p>Edit <code>pulpcore.service</code> using <code>systemctl</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ systemctl edit pulpcore.service</pre>
</div>
</div>
</li>
<li>
<p>Add the following entry to <code>pulpcore.service</code> to ensure that automation hub services starts only after starting the network and mounting the remote mount points:</p>
<div class="listingblock">
<div class="content">
<pre>[Unit]
After=network.target var-lib-pulp.mount</pre>
</div>
</div>
</li>
<li>
<p>Enable <code>remote-fs.target</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ systemctl enable remote-fs.target</pre>
</div>
</div>
</li>
<li>
<p>Reboot the system:</p>
<div class="listingblock">
<div class="content">
<pre>$ systemctl reboot</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Troubleshooting</div>
<p>A bug in the pulpcore SELinux policies can cause the token authentication public/private keys in <code>etc/pulp/certs/</code> to not have the proper SELinux labels, causing the pulp process to fail. When this occurs, run the following command to temporarily attach the proper labels:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ chcon system_u:object_r:pulpcore_etc_t:s0 /etc/pulp/certs/token_{private,public}_key.pem</pre>
</div>
</div>
<div class="paragraph">
<p>Repeat this command to reattach the proper SELinux labels whenever you relabel your system.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-standlone-hub-ext-database-inventory_platform-install-scenario">Single automation hub with external (installer managed) database</h5>
<div class="paragraph _abstract">
<p>Use this example to populate the inventory file to deploy a single instance of automation hub with an external (installer managed) database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[automationcontroller]

[automationhub]
automationhub.example.com

[database]
data.example.com

[all:vars]
registry_url='registry.redhat.io'
registry_username='&lt;registry username&gt;'
registry_password='&lt;registry password&gt;'

automationhub_admin_password= &lt;PASSWORD&gt;

automationhub_pg_host='data.example.com'
automationhub_pg_port='5432'

automationhub_pg_database='automationhub'
automationhub_pg_username='automationhub'
automationhub_pg_password=&lt;PASSWORD&gt;
automationhub_pg_sslmode='prefer'

# The default install will deploy a TLS enabled Automation Hub.
# If for some reason this is not the behavior wanted one can
# disable TLS enabled deployment.
#
# automationhub_disable_https = False
# The default install will generate self-signed certificates for the Automation
# Hub service. If you are providing valid certificate via automationhub_ssl_cert
# and automationhub_ssl_key, one should toggle that value to True.
#
# automationhub_ssl_validate_certs = False
# SSL-related variables
# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt
# Certificate and key to install in Automation Hub node
# automationhub_ssl_cert=/path/to/automationhub.cert
# automationhub_ssl_key=/path/to/automationhub.key</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-standalone-hub-ext-database-customer-provided_platform-install-scenario">Single automation hub with external (customer provided) database</h5>
<div class="paragraph _abstract">
<p>Use this example to populate the inventory file to deploy a single instance of automation hub with an external database that is not managed by the platform installer.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>This example does not have a host under the database group. This indicates to the installer that the database already exists, and is being managed elsewhere.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>[automationcontroller]

[automationhub]
automationhub.example.com

[database]

[all:vars]
registry_url='registry.redhat.io'
registry_username='&lt;registry username&gt;'
registry_password='&lt;registry password&gt;'

automationhub_admin_password= &lt;PASSWORD&gt;

automationhub_pg_host='data.example.com'
automationhub_pg_port='5432'

automationhub_pg_database='automationhub'
automationhub_pg_username='automationhub'
automationhub_pg_password=&lt;PASSWORD&gt;
automationhub_pg_sslmode='prefer'

# The default install will deploy a TLS enabled Automation Hub.
# If for some reason this is not the behavior wanted one can
# disable TLS enabled deployment.
#
# automationhub_disable_https = False
# The default install will generate self-signed certificates for the Automation
# Hub service. If you are providing valid certificate via automationhub_ssl_cert
# and automationhub_ssl_key, one should toggle that value to True.
#
# automationhub_ssl_validate_certs = False
# SSL-related variables
# If set, this will install a custom CA certificate to the system trust store.
# custom_ca_cert=/path/to/ca.crt
# Certificate and key to install in Automation Hub node
# automationhub_ssl_cert=/path/to/automationhub.cert
# automationhub_ssl_key=/path/to/automationhub.key</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-ldap-config-on-pah_platform-install-scenario">LDAP configuration on private automation hub</h5>
<div class="paragraph">
<p>You must set the following six variables in your Red Hat Ansible Automation Platform installer inventory file to configure your private automation hub for LDAP authentication:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>automationhub_authentication_backend</code></p>
</li>
<li>
<p><code>automationhub_ldap_server_uri</code></p>
</li>
<li>
<p><code>automationhub_ldap_bind_dn</code></p>
</li>
<li>
<p><code>automationhub_ldap_bind_password</code></p>
</li>
<li>
<p><code>automationhub_ldap_user_search_base_dn</code></p>
</li>
<li>
<p><code>automationhub_ldap_group_search_base_dn</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If any of these variables are missing, the Ansible Automation installer cannot complete the installation.</p>
</div>
<div class="sect5">
<h6 id="_setting_up_your_inventory_file_variables">Setting up your inventory file variables</h6>
<div class="paragraph">
<p>When you configure your private automation hub with LDAP authentication, you must set the proper variables in your inventory files during the installation process.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access your inventory file according to the procedure in <a href="hhttps://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.3/html-single/red_hat_ansible_automation_platform_installation_guide/index#proc-editing-installer-inventory-file_platform-install-scenario">Editing the Red Hat Ansible Automation Platform installer inventory file</a>.</p>
</li>
<li>
<p>Use the following example as a guide to set up your Ansible Automation Platform inventory file:</p>
<div class="listingblock">
<div class="content">
<pre>automationhub_authentication_backend = "ldap"

automationhub_ldap_server_uri = "ldap://ldap:389"   (for LDAPs use  automationhub_ldap_server_uri = "ldaps://ldap-server-fqdn")
automationhub_ldap_bind_dn = "cn=admin,dc=ansible,dc=com"
automationhub_ldap_bind_password = "GoodNewsEveryone"
automationhub_ldap_user_search_base_dn = "ou=people,dc=ansible,dc=com"
automationhub_ldap_group_search_base_dn = "ou=people,dc=ansible,dc=com"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The following variables will be set with default values, unless you set them with other options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>auth_ldap_user_search_scope= `SUBTREE'
auth_ldap_user_search_filter= `(uid=%(user)s)`
auth_ldap_group_search_scope= 'SUBTREE'
auth_ldap_group_search_filter= '(objectClass=Group)`
auth_ldap_group_type_class= 'django_auth_ldap.config:GroupOfNamesType'</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Optional: Set up extra parameters in your private automation hub such as user groups, super user access, or mirroring. Go to <a href="ref-ldap-config-on-pah_platform-install-scenario.html#configuring_extra_ldap_parameters">Configuring extra LDAP parameters</a> to complete this optional step.</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="_configuring_extra_ldap_parameters">Configuring extra LDAP parameters</h6>
<div class="paragraph">
<p>If you plan to set up super user access, user groups, mirroring or other extra parameters, you can create a yaml file that comprises them in your <code>ldap_extra_settings</code> dictionary.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a yaml file that contains <code>ldap_extra_settings</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Example:</p>
<div class="listingblock">
<div class="content">
<pre>#ldapextras.yml
---
ldap_extra_settings:
  AUTH_LDAP_USER_ATTR_MAP: '{"first_name": "givenName", "last_name": "sn", "email": "mail"}'
...</pre>
</div>
</div>
<div class="paragraph">
<p>Then run <code>setup.sh -e @ldapextras.yml</code> during private automation hub installation.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Use this example to set up a superuser flag based on membership in an LDAP group.</p>
<div class="listingblock">
<div class="content">
<pre>#ldapextras.yml
---
ldap_extra_settings:
  AUTH_LDAP_USER_FLAGS_BY_GROUP: {"is_superuser": "cn=pah-admins,ou=groups,dc=example,dc=com",}
...</pre>
</div>
</div>
<div class="paragraph">
<p>Then run <code>setup.sh -e @ldapextras.yml</code> during private automation hub installation.</p>
</div>
</li>
<li>
<p>Use this example to set up superuser access.</p>
<div class="listingblock">
<div class="content">
<pre>#ldapextras.yml
---
ldap_extra_settings:
  AUTH_LDAP_USER_FLAGS_BY_GROUP: {"is_superuser": "cn=pah-admins,ou=groups,dc=example,dc=com",}
...</pre>
</div>
</div>
<div class="paragraph">
<p>Then run <code>setup.sh -e @ldapextras.yml</code> during private automation hub installation.</p>
</div>
</li>
<li>
<p>Use this example to mirror all LDAP groups you belong to.</p>
<div class="listingblock">
<div class="content">
<pre>#ldapextras.yml
---
ldap_extra_settings:
  AUTH_LDAP_MIRROR_GROUPS: True
...</pre>
</div>
</div>
<div class="paragraph">
<p>Then run <code>setup.sh -e @ldapextras.yml</code> during private automation hub installation.</p>
</div>
</li>
<li>
<p>Use this example to map LDAP user attributes (such as first name, last name, and email address of the user).</p>
<div class="listingblock">
<div class="content">
<pre>#ldapextras.yml
---
ldap_extra_settings:
  AUTH_LDAP_USER_ATTR_MAP: {"first_name": "givenName", "last_name": "sn", "email": "mail",}
...</pre>
</div>
</div>
<div class="paragraph">
<p>Then run <code>setup.sh -e @ldapextras.yml</code> during private automation hub installation.</p>
</div>
</li>
<li>
<p>Use the following examples to grant or deny access based on LDAP group membership:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To grant private automation hub access (for example, members of the <code>cn=pah-nosoupforyou,ou=groups,dc=example,dc=com</code> group):</p>
<div class="listingblock">
<div class="content">
<pre>#ldapextras.yml
---
ldap_extra_settings:
  AUTH_LDAP_DENY_GROUP: 'cn=pah-nosoupforyou,ou=groups,dc=example,dc=com'
...</pre>
</div>
</div>
</li>
<li>
<p>To deny private automation hub access (for example, members of the <code>cn=pah-nosoupforyou,ou=groups,dc=example,dc=com</code> group):</p>
<div class="listingblock">
<div class="content">
<pre>#ldapextras.yml
---
ldap_extra_settings:
  AUTH_LDAP_DENY_GROUP: 'cn=pah-nosoupforyou,ou=groups,dc=example,dc=com'
...</pre>
</div>
</div>
</li>
<li>
<p>Then run <code>setup.sh -e @ldapextras.yml</code> during private automation hub installation.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Use this example to enable LDAP debug logging.</p>
<div class="listingblock">
<div class="content">
<pre>#ldapextras.yml
---
ldap_extra_settings:
  GALAXY_LDAP_LOGGING: True
...</pre>
</div>
</div>
<div class="paragraph">
<p>Then run <code>setup.sh -e @ldapextras.yml</code> during private automation hub installation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If it is not practical to re-run <code>setup.sh</code> or if debug logging is enabled for a short time, you can add a line containing <code>GALAXY_LDAP_LOGGING: True</code> manually to the <code>/etc/pulp/settings.py</code> file on private automation hub. Restart both <code>pulpcore-api.service</code> and <code>nginx.service</code> for the changes to take effect. To avoid failures due to human error, use this method only when necessary.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Use this example to configure LDAP caching by setting the variable <code>AUTH_LDAP_CACHE_TIMEOUT</code>.</p>
<div class="listingblock">
<div class="content">
<pre>#ldapextras.yml
---
ldap_extra_settings:
  AUTH_LDAP_CACHE_TIMEOUT: 3600
...</pre>
</div>
</div>
<div class="paragraph">
<p>Then run <code>setup.sh -e @ldapextras.yml</code> during private automation hub installation.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>To verify you have set up correctly, confirm you can view all of your settings in the <code>/etc/pulp/settings.py</code> file on your private automation hub.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proc-running-setup-script_platform-install-scenario">3.2. Running the Red Hat Ansible Automation Platform installer setup script</h3>
<div class="paragraph _abstract">
<p>After you update the inventory file with required parameters for installing your private automation hub, run the installer setup script.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the <code>setup.sh</code> script</p>
<div class="listingblock">
<div class="content">
<pre>$ sudo ./setup.sh</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Installation of Red Hat Ansible Automation Platform will begin.</p>
</div>
</div>
<div class="sect2">
<h3 id="proc-verify-controller-installation_platform-install-scenario">3.3. Verifying installation of automation controller</h3>
<div class="paragraph _abstract">
<p>Verify that you installed automation controller successfully by logging in with the admin credentials you inserted in the <code>inventory</code> file.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the IP address specified for the automation controller node in the <code>inventory</code> file.</p>
</li>
<li>
<p>Log in with the Admin credentials you set in the <code>inventory</code> file.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The automation controller server is accessible from port 80 (<strong>https://&lt;CONTROLLER_SERVER_NAME&gt;/</strong>) but redirects to port 443, so port 443 must also be available.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the installation fails and you are a customer who has purchased a valid license for Red Hat Ansible Automation Platform, contact Ansible through the <a href="https://access.redhat.com/">Red Hat Customer portal</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Upon a successful login to automation controller, your installation of Red Hat Ansible Automation Platform 2.4 is complete.</p>
</div>
<div class="sect3">
<h4 id="_additional_automation_controller_configuration_and_resources">3.3.1. Additional automation controller configuration and resources</h4>
<div class="paragraph">
<p>See the following resources to explore additional automation controller configurations.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Resources to configure automation controller</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource link</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.ansible.com/automation-controller/latest/html/quickstart/index.html">Automation Controller Quick Setup Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set up automation controller and run your first playbook</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.ansible.com/automation-controller/latest/html/administration/index.html">Automation Controller Administration Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure automation controller administration through customer scripts, management jobs, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_operations_guide/assembly-configuring-proxy-support">Configuring proxy support for Red Hat Ansible Automation Platform</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set up automation controller with a proxy server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_operations_guide/assembly-controlling-data-collection">Managing usability analytics and data collection from automation controller</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manage what automation controller information you share with Red Hat</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.ansible.com/automation-controller/latest/html/userguide/index.html">Automation Controller User Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Review automation controller functionality in more detail</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="proc-verify-hub-installation_platform-install-scenario">3.4. Verifying installation of automation hub</h3>
<div class="paragraph _abstract">
<p>Verify that you installed your automation hub successfully by logging in with the admin credentials you inserted into the <code>inventory</code> file.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the IP address specified for the automation hub node in the <code>inventory</code> file.</p>
</li>
<li>
<p>Log in with the Admin credentials you set in the <code>inventory</code> file.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the installation fails and you are a customer who has purchased a valid license for Red Hat Ansible Automation Platform, contact Ansible through the <a href="https://access.redhat.com/">Red Hat Customer portal</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Upon a successful login to automation hub, your installation of Red Hat Ansible Automation Platform 2.4 is complete.</p>
</div>
<div class="sect3">
<h4 id="ref-hub-configs_platform-install-scenario">3.4.1. Additional automation hub configuration and resources</h4>
<div class="paragraph">
<p>See the following resources to explore additional automation hub configurations.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Resources to configure automation controller</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource link</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/getting_started_with_automation_hub/assembly-user-access">Managing user access in private automation hub</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure user access for automation hub</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/managing_content_in_automation_hub/managing-cert-valid-content">Managing Red Hat Certified, validated, and Ansible Galaxy content in automation hub</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add content to your automation hub</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/managing_content_in_automation_hub/assembly-managing-private-collections">Publishing proprietary content collections in automation hub</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Publish internally developed collections on your automation hub</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="proc-verify-eda-controller-installation_platform-install-scenario">3.5. Verifying Event-Driven Ansible controller installation</h3>
<div class="paragraph _abstract">
<p>Verify that you installed Event-Driven Ansible controller successfully by logging in with the admin credentials you inserted in the inventory file.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the IP address specified for the Event-Driven Ansible controller node in the <code>inventory</code> file.</p>
</li>
<li>
<p>Log in with the Admin credentials you set in the <code>inventory</code> file.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the installation fails and you are a customer who has purchased a valid license for Red Hat Ansible Automation Platform, contact Ansible through the <a href="https://access.redhat.com/">Red Hat Customer portal</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Upon a successful login to Event-Driven Ansible controller, your installation of Red Hat Ansible Automation Platform 2.4 is complete.</p>
</div>
</div>
<div class="sect2">
<h3 id="assembly-platform-whats-next_platform-install-scenario">3.6. Post-installation steps</h3>
<div class="paragraph _abstract">
<p>Whether you are a new Ansible Automation Platform user looking to start automating, or an existing administrator looking to migrate old Ansible content to your latest installed version of Red Hat Ansible Automation Platform, explore the next steps to begin leveraging the new features of Ansible Automation Platform 2.4:</p>
</div>
<div class="sect3">
<h4 id="_migrating_data_to_ansible_automation_platform_2_4">3.6.1. Migrating data to Ansible Automation Platform 2.4</h4>
<div class="paragraph">
<p>For platform administrators looking to complete an upgrade to the Ansible Automation Platform 2.4, there may be additional steps needed to migrate data to a new instance:</p>
</div>
<div class="sect4">
<h5 id="_migrating_from_legacy_virtual_environments_venvs_to_automation_execution_environments">Migrating from legacy virtual environments (venvs) to automation execution environments</h5>
<div class="paragraph">
<p>Ansible Automation Platform 2.4 moves you away from custom Python virtual environments (venvs) in favor of automation execution environments - containerized images that packages the necessary components needed to execute and scale your Ansible automation. This includes Ansible Core, Ansible Content Collections, Python dependencies, Red Hat Enterprise Linux UBI 8, and any additional package dependencies.</p>
</div>
<div class="paragraph">
<p>If you are looking to migrate your venvs to execution environments, you will (1) need to use the <code>awx-manage</code> command to list and export a list of venvs from your original instance, then (2) use <code>ansible-builder</code> to create execution environments.</p>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_upgrade_and_migration_guide/upgrading-to-ees">Upgrading to Automation Execution Environments guide</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/creating_and_consuming_execution_environments/index">Creating and Consuming Execution Environments</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_migrating_to_ansible_engine_2_9_images_using_ansible_builder">Migrating to Ansible Engine 2.9 images using Ansible Builder</h5>
<div class="paragraph">
<p>To migrate Ansible Engine 2.9 images for use with Ansible Automation Platform 2.4, the <code>ansible-builder</code> tool automates the process of rebuilding images (including its custom plugins and dependencies) for use with automation execution environments.</p>
</div>
<div class="paragraph _additional-resources">
<div class="title">Additional resources</div>
<p>For more information on using Ansible Builder to build execution environments, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/creating_and_consuming_execution_environments/index">Creating and Consuming Execution Environments</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_migrating_to_ansible_core_2_13">Migrating to Ansible Core 2.13</h5>
<div class="paragraph">
<p>When upgrading to Ansible Core 2.13, you need to update your playbooks, plugins, or other parts of your Ansible infrastructure in order to be supported by the latest version of Ansible Core. For instructions on updating your Ansible content for Ansible Core 2.13 compatibility, see the <a href="https://docs.ansible.com/ansible-core/devel/porting_guides/porting_guide_core_2.13.html">Ansible-core 2.13 Porting Guide</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="updating-ee-image-locations_platform-install-scenario">3.6.2. Updating execution environment image locations</h4>
<div class="paragraph _abstract">
<p>If your private automation hub was installed separately, you can update your execution environment image locations to point to your private automation hub. Use this procedure to update your execution environment image locations.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the directory containing <code>setup.sh</code></p>
</li>
<li>
<p>Create <code>./group_vars/automationcontroller</code> by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>touch ./group_vars/automationcontroller</pre>
</div>
</div>
</li>
<li>
<p>Paste the following content into <code>./group_vars/automationcontroller</code>, being sure to adjust the settings to fit your environment:</p>
<div class="listingblock">
<div class="content">
<pre># Automation Hub Registry
registry_username: 'your-automation-hub-user'
registry_password: 'your-automation-hub-password'
registry_url: 'automationhub.example.org'
registry_verify_ssl: False

## Execution Environments
control_plane_execution_environment: 'automationhub.example.org/ee-supported-rhel8:latest'

global_job_execution_environments:
  - name: "Default execution environment"
    image: "automationhub.example.org/ee-supported-rhel8:latest"
  - name: "Ansible Engine 2.9 execution environment"
    image: "automationhub.example.org/ee-29-rhel8:latest"
  - name: "Minimal execution environment"
    image: "automationhub.example.org/ee-minimal-rhel8:latest"</pre>
</div>
</div>
</li>
<li>
<p>Run the <code>./setup.sh</code> script</p>
<div class="listingblock">
<div class="content">
<pre>$ ./setup.sh</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Log into Ansible Automation Platform as a user with system administrator access.</p>
</li>
<li>
<p>Navigate to <span class="menuseq"><b class="menu">Administration</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Execution Environments</b></span>.</p>
</li>
<li>
<p>In the Image column, confirm that the execution environment image location has changed from the default value of <code>&lt;registry url&gt;/ansible-automation-platform-&lt;version&gt;/&lt;image name&gt;:&lt;tag&gt;</code> to <code>&lt;automation hub url&gt;/&lt;image name&gt;:&lt;tag&gt;</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_scale_up_your_automation_using_automation_mesh">3.6.3. Scale up your automation using automation mesh</h4>
<div class="paragraph">
<p>The automation mesh component of the Red Hat Ansible Automation Platform simplifies the process of distributing automation across multi-site deployments. For enterprises with multiple isolated IT environments, automation mesh provides a consistent and reliable way to deploy and scale up automation across your execution nodes using a peer-to-peer mesh communication network.</p>
</div>
<div class="paragraph">
<p>When upgrading from version 1.x to the latest version of the Ansible Automation Platform, you will need to migrate the data from your legacy isolated nodes into execution nodes necessary for automation mesh. You can implement automation mesh by planning out a network of hybrid and control nodes, then editing the inventory file found in the Ansible Automation Platform installer to assign mesh-related values to each of your execution nodes.</p>
</div>
<div class="paragraph">
<p>For instructions on how to migrate from isolated nodes to execution nodes, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_upgrade_and_migration_guide/index">Red Hat Ansible Automation Platform Upgrade and Migration Guide</a>.</p>
</div>
<div class="paragraph">
<p>For information about automation mesh and the various ways to design your automation mesh for your environment, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_automation_mesh_guide/index">Red Hat Ansible Automation Platform automation mesh guide</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disconnected-installation">4. Disconnected installation</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>If you are not connected to the internet or do not have access to online repositories, you can install Red Hat Ansible Automation Platform without an active internet connection.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites">4.1. Prerequisites</h3>
<div class="paragraph">
<p>Before installing Ansible Automation Platform on a disconnected network, you must meet the following prerequisites:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A created subscription manifest. See <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html/red_hat_ansible_automation_platform_operations_guide/assembly-aap-obtain-manifest-files#doc-wrapper">Obtaining a manifest file</a> for more information.</p>
</li>
<li>
<p>The Ansible Automation Platformsetup bundle at <a href="https://access.redhat.com/downloads/content/480/ver=2.4/rhel---9/2.4/x86_64/product-software">Customer Portal</a> is downloaded.</p>
</li>
<li>
<p>The <a href="https://docs.ansible.com/ansible/latest/collections/community/general/nsupdate_module.html">DNS records</a> for the automation controller and private automation hub servers are created.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="con-aap-installation-on-disconnected-rhel_disconnected-installation">4.2. Ansible Automation Platform installation on disconnected RHEL</h3>
<div class="paragraph _abstract">
<p>You can install Ansible Automation Platform automation controller and a private automation hub without an internet connection by using the installer-managed database located on the automation controller. The setup bundle is recommended for disconnected installation because it includes additional components that make installing Ansible Automation Platform easier in a disconnected environment. These include the Ansible Automation Platform Red Hat package managers (RPMs) and the default execution environment (EE) images.</p>
</div>
<div class="sect3">
<h4 id="_system_requirements_for_disconnected_installation">4.2.1. System requirements for disconnected installation</h4>
<div class="paragraph">
<p>Ensure that your system has all the hardware requirements before performing a disconnected installation of Ansible Automation Platform. You can find these requirements in Chapter 2. System Requirements [link] in the Ansible Automation Platform Installation Guide..</p>
</div>
</div>
<div class="sect3">
<h4 id="_rpm_source">4.2.2. RPM Source</h4>
<div class="paragraph">
<p>RPM dependencies for Ansible Automation Platform that come from the BaseOS and AppStream repositories are not included in the setup bundle. To add these dependencies, you must first obtain access to BaseOS and AppStream repositories. Use Satellite to sync repositories and add dependencies. If you prefer an alternative tool, you can choose between the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reposync</p>
</li>
<li>
<p>The RHEL Binary DVD</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The RHEL Binary DVD method requires the DVD for supported versions of RHEL, including version 8.6 or higher. See <a href="https://access.redhat.com/support/policy/updates/errata">Red Hat Enterprise Linux Life Cycle</a> for information on which versions of RHEL are currently supported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Additonal Resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.11/html/installing_satellite_server_in_a_disconnected_network_environment/index">Satellite</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proc-synchronizing-rpm-repositories-by-using-reposync_disconnected-installation">4.3. Synchronizing RPM repositories using reposync</h3>
<div class="paragraph">
<p>To perform a reposync you need a RHEL host that has access to the internet. After the repositories are synced, you can move the repositories to the disconnected network hosted from a web server.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Attach the BaseOS and AppStream required repositories:</p>
<div class="listingblock">
<div class="content">
<pre># subscription-manager repos \
    --enable rhel-8-for-x86_64-baseos-rpms \
    --enable rhel-8-for-x86_64-appstream-rpms</pre>
</div>
</div>
</li>
<li>
<p>Perform the reposync:</p>
<div class="listingblock">
<div class="content">
<pre># dnf install yum-utils
# reposync -m --download-metadata --gpgcheck \
    -p /path/to/download</pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Use reposync with <code>--download-metadata</code> and without <code>--newest-only</code>. See <a href="//https://access.redhat.com/solutions/5186621">RHEL 8</a> Reposync.</p>
<div class="ulist">
<ul>
<li>
<p>If you are not using <code>--newest-only,</code> the repos downloaded will be ~90GB.</p>
</li>
<li>
<p>If you are using <code>--newest-only,</code> the repos downloaded will be ~14GB.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>If you plan to use Red Hat Single Sign-On, sync these repositories:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>jb-eap-7.3-for-rhel-8-x86_64-rpms</p>
</li>
<li>
<p>rh-sso-7.4-for-rhel-8-x86_64-rpms</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After the reposync is completed, your repositories are ready to use with a web server.</p>
</div>
</li>
<li>
<p>Move the repositories to your disconnected network.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc-creating-a-new-web-server-to-host-repositories_disconnected-installation">4.4. Creating a new web server to host repositories</h3>
<div class="paragraph">
<p>If you do not have an existing web server to host your repositories, you can create one with your synced repositories.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install prerequisites:</p>
<div class="listingblock">
<div class="content">
<pre>$ sudo dnf install httpd</pre>
</div>
</div>
</li>
<li>
<p>Configure httpd to serve the repo directory:</p>
<div class="listingblock">
<div class="content">
<pre>/etc/httpd/conf.d/repository.conf

DocumentRoot '/path/to/repos'

&lt;LocationMatch "^/+$"&gt;
    Options -Indexes
    ErrorDocument 403 /.noindex.html
&lt;/LocationMatch&gt;

&lt;Directory '/path/to/repos'&gt;
    Options All Indexes FollowSymLinks
    AllowOverride None
    Require all granted
&lt;/Directory&gt;</pre>
</div>
</div>
</li>
<li>
<p>Ensure that the directory is readable by an apache user:</p>
<div class="listingblock">
<div class="content">
<pre>$ sudo chown -R apache /path/to/repos</pre>
</div>
</div>
</li>
<li>
<p>Configure SELinux:</p>
<div class="listingblock">
<div class="content">
<pre>$ sudo semanage fcontext -a -t httpd_sys_content_t "/path/to/repos(/.*)?"
$ sudo restorecon -ir /path/to/repos</pre>
</div>
</div>
</li>
<li>
<p>Enable httpd:</p>
<div class="listingblock">
<div class="content">
<pre>$ sudo systemctl enable --now httpd.service</pre>
</div>
</div>
</li>
<li>
<p>Open firewall:</p>
<div class="listingblock">
<div class="content">
<pre>$ sudo firewall-cmd --zone=public --add-service=http add-service=https --permanent
$ sudo firewall-cmd --reload</pre>
</div>
</div>
</li>
<li>
<p>On automation controller and automation hub, add a repo file at <em>/etc/yum.repos.d/local.repo</em>, and add the optional repos if needed:</p>
<div class="listingblock">
<div class="content">
<pre>[Local-BaseOS]
name=Local BaseOS
baseurl=http://&lt;webserver_fqdn&gt;/rhel-8-for-x86_64-baseos-rpms
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release

[Local-AppStream]
name=Local AppStream
baseurl=http://&lt;webserver_fqdn&gt;/rhel-8-for-x86_64-appstream-rpms
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="accessing-rpm-repositories-for-locally-mounted-dvd_disconnected-installation">4.5. Accessing RPM repositories from a locally mounted DVD</h3>
<div class="paragraph">
<p>If you plan to access the repositories from the RHEL binary DVD, you must first set up a local repository.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Mount DVD or ISO:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>DVD</p>
<div class="listingblock">
<div class="content">
<pre># mkdir /media/rheldvd &amp;&amp; mount /dev/sr0 /media/rheldvd</pre>
</div>
</div>
</li>
<li>
<p>ISO</p>
<div class="listingblock">
<div class="content">
<pre># mkdir /media/rheldvd &amp;&amp; mount -o loop rhrhel-8.6-x86_64-dvd.iso /media/rheldvd</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Create yum repo file at <code>/etc/yum.repos.d/dvd.repo</code></p>
<div class="listingblock">
<div class="content">
<pre>[dvd-BaseOS]
name=DVD for RHEL - BaseOS
baseurl=file:///media/rheldvd/BaseOS
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release

[dvd-AppStream]
name=DVD for RHEL - AppStream
baseurl=file:///media/rheldvd/AppStream
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release</pre>
</div>
</div>
</li>
<li>
<p>Import the gpg key:</p>
<div class="listingblock">
<div class="content">
<pre># rpm --import /media/rheldvd/RPM-GPG-KEY-redhat-release</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the key is not imported you will see an error similar to</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Curl error (6): Couldn't resolve host name for
https://www.redhat.com/security/data/fd431d51.txt [Could not resolve host:
www.redhat.com]</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Additional Resources</div>
<p>For further detail on setting up a repository see <a href="https://access.redhat.com/solutions/3776721">Need to set up yum repository for locally-mounted DVD on Red Hat Enterprise Linux 8</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="adding-a-subscription-manifest-to-aap-without-an-internet-connection_disconnected-installation">4.6. Adding a subscription manifest to Ansible Automation Platform without an internet connection</h3>
<div class="paragraph">
<p>To add a subscription to Ansible Automation Platform without an internet connection, create and import a subscription manifest.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to <strong>access.redhat.com</strong>.</p>
</li>
<li>
<p>From the navigation panel, select <strong><span class="menuseq"><b class="menu">Subscriptions</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Subscriptions</b></span></strong>.</p>
</li>
<li>
<p>Select <strong><span class="menuseq"><b class="menu">Subscription Allocations</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Subscription Allocations</b></span></strong>.</p>
</li>
<li>
<p>Click <b class="button">Create New subscription allocation</b>.</p>
</li>
<li>
<p>Name the new subscription allocation.</p>
</li>
<li>
<p>Select <span class="menuseq"><b class="menu">Satellite 6.8</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Satellite 6.8</b></span> as the type.</p>
</li>
<li>
<p>Click <b class="button">Create</b>. The <strong>Details</strong> tab opens for your subscription allocation.</p>
</li>
<li>
<p>Select the <span class="menuseq"><b class="menu">Subscriptions</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Subscriptions</b></span> tab.</p>
</li>
<li>
<p>Click <b class="button">Add Subscription</b>.</p>
</li>
<li>
<p>Find your Ansible Automation Platform subscription, and in the <strong>Entitlements</strong> box, <strong>add</strong> the number of entitlements you want to assign to your environment. A single entitlement is needed for each node that will be managed by Ansible Automation Platform: server, network device, etc.</p>
</li>
<li>
<p>Click <b class="button">Submit</b>.</p>
</li>
<li>
<p>Click <b class="button">Export Manifest</b>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This downloads a file <em>manifest_&lt;allocation name&gt;_&lt;date&gt;.zip</em> that be imported with automation controller after installation.</p>
</div>
</div>
<div class="sect2">
<h3 id="installing-the-aap-setup-bundle_disconnected-installation">4.7. Downloading and installing the Ansible Automation Platform setup bundle</h3>
<div class="paragraph _abstract">
<p>Choose the setup bundle to download Ansible Automation Platform (AAP)for disconnected installations. This bundle includes the RPM content for AAP and the default execution environment images that will be uploaded to your private automation hub during the installation process.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the Ansible Automation Platform setup bundle package by navigating to the <a href="https://access.redhat.com/downloads/content/480/ver=2.4/rhel---9/2.4/x86_64/product-software">Red Hat Ansible Automation Platform download</a> page and clicking <b class="button">Download Now</b> for the Ansible Automation Platform 2.4 Setup Bundle.</p>
</li>
<li>
<p>From automation controller, untar the bundle:</p>
<div class="listingblock">
<div class="content">
<pre>$ tar xvf \
   ansible-automation-platform-setup-bundle-2.4-1.tar.gz
$ cd ansible-automation-platform-setup-bundle-2.4-1</pre>
</div>
</div>
</li>
<li>
<p>Edit the inventory file to include the required options:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>automationcontroller group</p>
</li>
<li>
<p>automationhub group</p>
</li>
<li>
<p>admin_password</p>
</li>
<li>
<p>pg_password</p>
</li>
<li>
<p>automationhub_admin_password</p>
</li>
<li>
<p>automationhub_pg_host, automationhub_pg_port</p>
</li>
<li>
<p>automationhub_pg_password</p>
<div class="paragraph">
<p><strong>Example Inventory file</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>[automationcontroller]
automationcontroller.example.org ansible_connection=local

[automationcontroller:vars]
peers=execution_nodes

[automationhub]
automationhub.example.org

[all:vars]
admin_password='password123'

pg_database='awx'
pg_username='awx'
pg_password='dbpassword123'

receptor_listener_port=27199

automationhub_admin_password='hubpassword123'

automationhub_pg_host='automationcontroller.example.org'
automationhub_pg_port='5432'

automationhub_pg_database='automationhub'
automationhub_pg_username='automationhub'
automationhub_pg_password='dbpassword123'
automationhub_pg_sslmode='prefer'</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Run the Ansible Automation Platform setup bundle executable as the root user:</p>
<div class="listingblock">
<div class="content">
<pre>$ sudo -i
# cd /path/to/ansible-automation-platform-setup-bundle-2.4-1
# ./setup.sh</pre>
</div>
</div>
</li>
<li>
<p>When installation is complete, navigate to the Fully Qualified Domain Name (FQDN) for the automation controller node that was specified in the installation inventory file.</p>
</li>
<li>
<p>Log in using the administrator credentials specified in the installation inventory file.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The inventory file must be kept intact after installation because it is used for backup, restore, and upgrade functions. Keep a backup copy in a secure location, given that the inventory file contains passwords.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="completing-post-installation-tasks_disconnected-installation">4.8. Completing post installation tasks</h3>
<div class="paragraph _abstract">
<p>After you have completed the installation of Ansible Automation Platform, ensure that automation hub and automation controller deploy properly.</p>
</div>
<div class="sect3">
<h4 id="_adding_a_controller_subscription">4.8.1. Adding a controller subscription</h4>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the FQDN of the Automation controller. Log in with the username admin and the password you specified as <code>admin_password</code> in your inventory file.</p>
</li>
<li>
<p>Click <b class="button">Browse</b> and select the <em>manifest.zip</em> you created earlier.</p>
</li>
<li>
<p>Click <b class="button">Next</b>.</p>
</li>
<li>
<p>Uncheck <b class="button">User analytics</b> and <b class="button">Automation analytics</b>. These rely on an internet connection and must be turned off.</p>
</li>
<li>
<p>Click <b class="button">Next</b>.</p>
</li>
<li>
<p>Read the End User License Agreement and click <b class="button">Submit</b> if you agree.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_updating_the_ca_trust_store">4.8.2. Updating the CA trust store</h4>
<div class="paragraph">
<p>As part of your post-installation tasks, you must update the software&#8217;s certificates.
By default, Ansible Automation Platform automation hub and automation controller are installed using self-signed certificates. Because of this, the controller does not trust the hubs certificate and will not download the execution environment from the hub.</p>
</div>
<div class="paragraph">
<p>To ensure that automation controller downloads the execution environment from automation hub, you must import the hubs Certificate Authority (CA) certificate as a trusted certificate on the controller. You can do this in one of two ways, depending on whether SSH is available as root user between automation controller and private automation hub.</p>
</div>
<div class="sect4">
<h5 id="_using_secure_copy_scp_as_a_root_user">Using secure copy (SCP) as a root user</h5>
<div class="paragraph">
<p>If SSH is available as the root user between the controller and private automation hub, use SCP to copy the root certificate on the private automation hub to the controller.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run <code>update-ca-trust</code> on the controller to update the CA trust store:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sudo -i
# scp &lt;hub_fqdn&gt;:/etc/pulp/certs/root.crt
/etc/pki/ca-trust/source/anchors/automationhub-root.crt
# update-ca-trust</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_copying_and_pasting_as_a_non_root_user">Copying and pasting as a non root user</h5>
<div class="paragraph">
<p>If SSH is unavailable as root between the private automation hub and the controller, copy the contents of the file <em>/etc/pulp/certs/root.crt</em> on the private automation hub and paste it into a new file on the controller called <em>/etc/pki/ca-trust/source/anchors/automationhub-root.crt</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run <code>update-ca-trust</code> to update the CA trust store with the new certificate. On the private automation hub, run:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sudo -i
# cat /etc/pulp/certs/root.crt
(copy the contents of the file, including the lines with 'BEGIN CERTIFICATE' and
'END CERTIFICATE')</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the automation controller:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sudo -i
# vi /etc/pki/ca-trust/source/anchors/automationhub-root.crt
(paste the contents of the root.crt file from the private automation hub into the new file and write to disk)
# update-ca-trust</pre>
</div>
</div>
<div class="ulist">
<div class="title">Additional Resources</div>
<ul>
<li>
<p>For further information on unknown certificate authority, see <a href="https://access.redhat.com/solutions/6707451">Project sync fails with unknown certificate authority error in Ansible Automation Platform 2.1</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="importing-collections-into-private-automation-hub_disconnected-installation">4.9. Importing collections into private automation hub</h3>
<div class="paragraph">
<p>You can download a collection as a tarball file from Ansible automation hub for use in your private automation hub. Certified collections are available on the <a href="https://console.redhat.com/ansible/automation-hub/">automation hub Hybrid Cloud Console</a>, and community collections are on <a href="https://galaxy.ansible.com/">Ansible Galaxy</a>. You must also download and install any dependencies needed for the collection.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to console.redhat.com and log in with your Red Hat credentials.</p>
</li>
<li>
<p>Click on the <strong>collection</strong> you want to download.</p>
</li>
<li>
<p>Click <b class="button">Download tarball</b></p>
</li>
<li>
<p>To verify if a collection has dependencies, click the <strong>Dependencies</strong> tab.</p>
</li>
<li>
<p>Download any dependencies needed for this collection.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-collection-namespace_disconnected-installation">4.10. Creating a collection namespace</h3>
<div class="paragraph">
<p>Before importing a collection, you must first create a namespace for the collection in your private automation hub. You can find the namespace name by looking at the first part of the collection tarball filename. For example, the namespace of the collection <em>ansible-netcommon-3.0.0.tar.gz</em> is <em>ansible</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the <a href="https://console.redhat.com/ansible/automation-hub/">automation hub Hybrid Cloud Console</a>.</p>
</li>
<li>
<p>From the navigation panel, select <strong><span class="menuseq"><b class="menu">Collections</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Namespaces</b></span></strong>.</p>
</li>
<li>
<p>Click <strong><b class="button">Create</b></strong>.</p>
</li>
<li>
<p>Provide the namespace name.</p>
</li>
<li>
<p>Click <strong><b class="button">Create</b></strong>.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_importing_the_collection_tarball_by_using_the_web_console">4.10.1. Importing the collection tarball by using the web console</h4>
<div class="paragraph">
<p>Once the namespace has been created, you can import the collection by using the web console.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to <a href="https://console.redhat.com/ansible/automation-hub/">automation hub Hybrid Cloud Console</a>.</p>
</li>
<li>
<p>From the navigation panel, select <strong><span class="menuseq"><b class="menu">Collections</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Namespaces</b></span></strong>.</p>
</li>
<li>
<p>Click <strong><b class="button">View collections</b></strong> next to the namespace you will be importing the collection into.</p>
</li>
<li>
<p>Click <strong><b class="button">Upload collection</b></strong>.</p>
</li>
<li>
<p>Click the <strong>folder icon</strong> and select the tarball of the collection.</p>
</li>
<li>
<p>Click <b class="button">Upload</b>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This opens the 'My Imports' page.  You can see the status of the import and various details of the files and modules that have been imported.</p>
</div>
</div>
<div class="sect3">
<h4 id="_importing_the_collection_tarball_by_using_the_cli">4.10.2. Importing the collection tarball by using the CLI</h4>
<div class="paragraph">
<p>You can import collections into your private automation hub by using the command-line interface rather than the GUI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the collection tarballs to the private automation hub.</p>
</li>
<li>
<p>Log in to the private automation hub server via SSH.</p>
</li>
<li>
<p>Add the self-signed root CA cert to the trust store on automation hub.</p>
<div class="listingblock">
<div class="content">
<pre># cp /etc/pulp/certs/root.crt \
    /etc/pki/ca-trust/source/anchors/automationhub-root.crt
# update-ca-trust</pre>
</div>
</div>
</li>
<li>
<p>Update the <code>/etc/ansible/ansible.cfg</code> file with your automation hub configuration. Use either a token or a username and password for authentication.</p>
<div class="listingblock">
<div class="content">
<pre>[galaxy]
server_list = private_hub

[galaxy_server.private_hub]
url=https://&lt;hub_fqdn&gt;/api/galaxy/
token=&lt;token_from_private_hub&gt;</pre>
</div>
</div>
</li>
<li>
<p>Import the collection using the ansible-galaxy command.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ansible-galaxy collection publish &lt;collection_tarball&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="approving-the-imported-collection_disconnected-installation">4.11. Approving the imported collections</h3>
<div class="paragraph">
<p>After you have imported collections by using either the GUI or the CLI method, you must approve them by using the GUI. After they are approved, they are available for use.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to <a href="https://console.redhat.com/ansible/automation-hub/">automation hub Hybrid Cloud Console</a>.</p>
</li>
<li>
<p>From the navigation panel, select <strong><span class="menuseq"><b class="menu">Collections</b>&#160;<b class="caret">&#8250;</b> <b class="menuitem">Approval</b></span></strong>.</p>
</li>
<li>
<p>Click <strong><b class="button">Approve</b></strong> for the collection you want to approve.</p>
</li>
<li>
<p>The collection is now available for use in your private automation hub.</p>
</li>
<li>
<p>Import any dependency for the collection by repeating steps 2 and 3.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The collection is added to the "Published" repository regardless of its source.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Recommended collections depend on your use case. Ansible and Red Hat provide <a href="https://console.redhat.com/ansible/automation-hub">these collections.</a></p>
</div>
<div class="sect3">
<h4 id="_custom_automation_execution_environments">4.11.1. Custom automation execution environments</h4>
<div class="paragraph">
<p>Use the ansible-builder program to create custom execution environment images. For disconnected environments, custom execution environment images can be built in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Build an execution environment image on an internet-facing system and import it to the
disconnected environment.</p>
</li>
<li>
<p>Build an execution environment image entirely on the disconnected environment with some modifications to the normal process of using ansible-builder.</p>
</li>
<li>
<p>Create a minimal base container image that includes all of the necessary modifications for a disconnected environment, then build custom execution environment images from the base container image.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_transferring_custom_execution_environment_images_across_a_disconnected_boundary">Transferring custom execution environment images across a disconnected boundary</h5>
<div class="paragraph">
<p>You can build a custom execution environment image on an internet-facing machine. After you create an execution environment, it is available in the local podman image cache. You can then transfer the custom execution environment image across a disconnected boundary.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Save the image:</p>
<div class="listingblock">
<div class="content">
<pre>$ podman image save localhost/custom-ee:latest | gzip -c custom-ee-latest.tar.gz</pre>
</div>
</div>
<div class="paragraph">
<p>Transfer the file across the disconnected boundary by using an existing mechanism such as sneakernet or one-way diode.</p>
</div>
</li>
<li>
<p>After the image is available on the disconnected side, import it into the local podman cache, tag it, and push it to the disconnected hub:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ podman image load -i custom-ee-latest.tar.gz
$ podman image tag localhost/custom-ee &lt;hub_fqdn&gt;/custom-ee:latest
$ podman login &lt;hub_fqdn&gt; --tls-verify=false
$ podman push &lt;hub_fqdn&gt;/custom-ee:latest</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="building-an-execution-environment-in-a-disconnected-environment_disconnected-installation">4.12. Custom execution environment in a disconnected environment</h3>
<div class="paragraph">
<p>When building a custom execution environment, the ansible-builder tool defaults
to downloading the following requirements from the internet:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ansible Galaxy (galaxy.ansible.com) or automation hub (console.redhat.com) for any collections added to the execution environment image.</p>
</li>
<li>
<p>PyPI (pypi.org) for any python packages required as collection dependencies.</p>
</li>
<li>
<p>The UBI repositories (cdn.redhat.com) for updating any UBI-based execution environment images.</p>
<div class="ulist">
<ul>
<li>
<p>The RHEL repositories might also be needed to meet certain collection requirements.</p>
</li>
</ul>
</div>
</li>
<li>
<p>registry.redhat.io for access to the ansible-builder-rhel8 container image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Building an execution environment image in a disconnected environment requires a subset of all of these requirements mirrored, or otherwise made available on the disconnected network.</p>
</div>
<div class="paragraph">
<p>Mirrored PyPI content when transferred into the high-side network can be made available using a web server or an artifact repository like Nexus.</p>
</div>
<div class="paragraph">
<p>The UBI repositories can be mirrored on the low-side using a tool like <code>reposync</code>, imported to the disconnected environment, and made available from Satellite or a simple web server (because the content is freely redistributable).</p>
</div>
<div class="paragraph">
<p>The <code>ansible-builder-rhel8</code> container image can be imported into a private automation hub in the same way a custom execution environment can be imported.
See <a href="#approving-the-imported-collection_disconnected-installation">Transferring Custom execution environment Images Across a Disconnected Boundary</a> for details substituting <code>localhost/custom-ee</code> for <code>registry.redhat.io/ansible-automation-platform-21/ansible-builder-rhel8</code>. This makes the ansible-builder-rhel8 image available in the private automation hub registry along with the default execution environment images.</p>
</div>
<div class="paragraph">
<p>When all of the prerequisites are available on the high-side network, you can use ansible-builder and podman to create a custom execution environment image.</p>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional Resources</div>
<ul>
<li>
<p>See <a href="#importing-collections-into-private-automation-hub_disconnected-installation">Importing Collections into private automation hub</a> for information on importing collections from Ansible Galaxy or automation hub into a private automation hub.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="installing-the-ansible-builder-rpm_disconnected-installation">4.13. Installing the ansible-builder RPM</h3>
<div class="paragraph _abstract">
<p>In order to create custom execution environment images in a disconnected environment, you will need to have a working copy of ansible-builder installed. On a RHEL system there are several ways to do this.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Subscribe the RHEL box to a Satellite on the disconnected network.</p>
</li>
<li>
<p>Attach the Ansible Automation Platform subscription and enable the AAP repo.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This is preferred if a Satellite exists because the execution environment images can use RHEL content from the Satellite if the underlying build host is registered.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Any collection required must already be uploaded into your private automation hub.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Unarchive the Ansible Automation Platform setup bundle.</p>
</li>
<li>
<p>Install the ansible-builder RPM and its dependencies from the included content:</p>
<div class="listingblock">
<div class="content">
<pre>$ tar -xzvf ansible-automation-platform-setup-bundle-2.4-1.tar.gz
$ cd ansible-automation-platform-setup-bundle-2.4/bundle/el8/repos/
$ sudo yum install ansible-builder-1.0.1-2.el8ap.noarch.rpm
python38-requirements-parser-0.2.0-3.el8ap.noarch.rpm</pre>
</div>
</div>
</li>
<li>
<p>Create a directory for your custom execution environment build artifacts.</p>
<div class="listingblock">
<div class="content">
<pre>$ mkdir custom-ee
$ cd custom-ee/</pre>
</div>
</div>
</li>
<li>
<p>Create an <em>execution-environment.yml</em> file that defines the requirements for your custom execution environment following the documentation at
<a href="https://ansible-builder.readthedocs.io/en/stable/definition/" class="bare">https://ansible-builder.readthedocs.io/en/stable/definition/</a>. Override the <code>base_image</code> to point to the execution environment available in your private automation hub.</p>
<div class="listingblock">
<div class="content">
<pre>$ cat execution-environment.yml
---
version: 3
images:
  base_image:
    name:'&lt;hub_fqdn&gt;/ee-supported-rhel9:latest'

dependencies:
  python: requirements.txt
  galaxy: requirements.yml</pre>
</div>
</div>
</li>
<li>
<p>Create an <em>ansible.cfg</em> file that points to your private automation hub and contains credentials that allow uploading, such as an admin user token.</p>
<div class="listingblock">
<div class="content">
<pre>$ cat ansible.cfg
[galaxy]
server_list = private_hub

[galaxy_server.private_hub]
url=https://&lt;hub_fqdn&gt;/api/galaxy/
token=&lt;admin_token&gt;</pre>
</div>
</div>
</li>
<li>
<p>Create a <em>ubi.repo</em> file that points to your disconnected UBI repo mirror (this could be your Satellite if the UBI content is hosted there).</p>
<div class="paragraph">
<p>This is an example output where <code>reposync</code> was used to mirror the UBI repos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cat ubi.repo
[ubi-8-baseos]
name = Red Hat Universal Base Image 8 (RPMs) - BaseOS
baseurl = http://&lt;ubi_mirror_fqdn&gt;/repos/ubi-8-baseos
enabled = 1
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1

[ubi-8-appstream]
name = Red Hat Universal Base Image 8 (RPMs) - AppStream
baseurl = http://&lt;ubi_mirror_fqdn&gt;/repos/ubi-8-appstream
enabled = 1
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1</pre>
</div>
</div>
</li>
<li>
<p>Add the CA certificate used to sign the private automation hub web server certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For self-signed certificates (the installer default), make a copy of the file <em>/etc/pulp/certs/root.crt</em> from your private automation hub and name it <strong>hub-root.crt</strong>.</p>
</li>
<li>
<p>If you used an internal certificate authority to request and sign the private automation hub web server certificate, make a copy of that CA certificate called <strong>hub-root.crt</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create your python requirements.txt and ansible collection requirements.yml with the content needed for your custom execution environment image.</p>
</li>
<li>
<p>Use ansible-builder to create the context directory used to build the execution environment image.</p>
<div class="listingblock">
<div class="content">
<pre>$ ansible-builder create
Complete! The build context can be found at: /home/cloud-user/custom-ee/context
$ ls -1F
ansible.cfg
context/
execution-environment.yml
hub-root.crt
pip.conf
requirements.txt
requirements.yml
ubi.repo</pre>
</div>
</div>
</li>
<li>
<p>Copy the files used to override the internet-facing defaults into the context directory.</p>
<div class="listingblock">
<div class="content">
<pre>$ cp ansible.cfg hub-root.crt pip.conf ubi.repo context/</pre>
</div>
</div>
</li>
<li>
<p>Edit the file <strong>context/Containerfile</strong> and add the following modifications.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the first <strong>EE_BASE_IMAGE</strong> build section, add the <strong>ansible.cfg</strong> and <strong>hub-root.crt</strong> files and run the <code>update-ca-trust</code> command.</p>
</li>
<li>
<p>In the <strong>EE_BUILDER_IMAGE</strong> build section, add the <strong>ubi.repo</strong> and <strong>pip.conf</strong> files.</p>
</li>
<li>
<p>In the final <strong>EE_BASE_IMAGE</strong> build section, add the <strong>ubi.repo</strong> and pip.conf files.</p>
<div class="listingblock">
<div class="content">
<pre>$ cat context/Containerfile
ARG EE_BASE_IMAGE=&lt;hub_fqdn&gt;/ee-supported-rhel8:latest
ARG EE_BUILDER_IMAGE=&lt;hub_fqdn&gt;/ansible-builder-rhel8:latest

FROM $EE_BASE_IMAGE as galaxy
ARG ANSIBLE_GALAXY_CLI_COLLECTION_OPTS=
USER root

ADD _build /build
WORKDIR /build

# this section added
ADD ansible.cfg /etc/ansible/ansible.cfg
ADD hub-root.crt /etc/pki/ca-trust/source/anchors/hub-root.crt
RUN update-ca-trust
# end additions
RUN ansible-galaxy role install -r requirements.yml \
    --roles-path /usr/share/ansible/roles
RUN ansible-galaxy collection install \
    $ANSIBLE_GALAXY_CLI_COLLECTION_OPTS -r requirements.yml \
    --collections-path /usr/share/ansible/collections

FROM $EE_BUILDER_IMAGE as builder

COPY --from=galaxy /usr/share/ansible /usr/share/ansible

ADD _build/requirements.txt requirements.txt
RUN ansible-builder introspect --sanitize \
    --user-pip=requirements.txt \
    --write-bindep=/tmp/src/bindep.txt \
    --write-pip=/tmp/src/requirements.txt
# this section added
ADD ubi.repo /etc/yum.repos.d/ubi.repo
ADD pip.conf /etc/pip.conf
# end additions
RUN assemble

FROM $EE_BASE_IMAGE
USER root

COPY --from=galaxy /usr/share/ansible /usr/share/ansible
# this section added
ADD ubi.repo /etc/yum.repos.d/ubi.repo
ADD pip.conf /etc/pip.conf
# end additions

COPY --from=builder /output/ /output/
RUN /output/install-from-bindep &amp;&amp; rm -rf /output/wheels</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Create the execution environment image in the local podman cache by using the <code>podman</code> command.</p>
<div class="listingblock">
<div class="content">
<pre>$ podman build -f context/Containerfile \
    -t &lt;hub_fqdn&gt;/custom-ee:latest</pre>
</div>
</div>
</li>
<li>
<p>After the custom execution environment image builds successfully, push it to the private automation hub.</p>
<div class="listingblock">
<div class="content">
<pre>$ podman push &lt;hub_fqdn&gt;/custom-ee:latest</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_upgrading_between_minor_ansible_automation_platform_releases">4.13.1. Upgrading between minor Ansible Automation Platform releases</h4>
<div class="paragraph">
<p>To upgrade between minor releases of Ansible Automation Platform 2, use this general workflow.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download and unarchive the latest Ansible Automation Platform 2 setup bundle.</p>
</li>
<li>
<p>Create a backup of the existing installation.</p>
</li>
<li>
<p>Copy the existing installation inventory file into the new setup bundle directory.</p>
</li>
<li>
<p>Run <code>./setup.sh</code> to upgrade the installation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, to upgrade from version 2.2.0-7 to 2.3-1.2, make sure that both setup bundles are on the initial controller node where the installation occurred:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    $ ls -1F
ansible-automation-platform-setup-bundle-2.2.0-7/
ansible-automation-platform-setup-bundle-2.2.0-7.tar.gz
ansible-automation-platform-setup-bundle-2.3-1.2/
ansible-automation-platform-setup-bundle-2.3-1.2.tar.gz</pre>
</div>
</div>
<div class="paragraph">
<p>Back up the 2.2.0-7 installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd ansible-automation-platform-setup-bundle-2.2.0-7
$ sudo ./setup.sh -b
$ cd ..</pre>
</div>
</div>
<div class="paragraph">
<p>Copy the 2.2.0-7 inventory file into the 2.3-1.2 bundle directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd ansible-automation-platform-setup-bundle-2.2.0-7
$ cp inventory ../ansible-automation-platform-setup-bundle-2.3-1.2/
$ cd ..</pre>
</div>
</div>
<div class="paragraph">
<p>Upgrade from 2.2.0-7 to 2.3-1.2 with the setup.sh script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd ansible-automation-platform-setup-bundle-2.3-1.2
$ sudo ./setup.sh</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-inventory-files-vars">Appendix A: Inventory file variables</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following tables contain information about the pre-defined variables used in Ansible installation inventory files.
Not all of these variables are required.</p>
</div>
<div class="sect2">
<h3 id="ref-genera-inventory-variables">A.1. General variables</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Variable</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>enable_insights_collection</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default install registers the node to the Red Hat Insights for Red Hat Ansible Automation Platform Service if the node is registered with Subscription Manager.
Set to <code>False</code> to disable.</p>
<p class="tableblock">Default = <code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>nginx_user_http_config</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of nginx configurations for <code>/etc/nginx/nginx.conf</code> under the http section.</p>
<p class="tableblock">Each element in the list is provided into <code>http nginx config</code> as a separate line.</p>
<p class="tableblock">Default = empty list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>registry_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>registry_password</code> is only required if a non-bundle installer is used.</p>
<p class="tableblock">Password credential for access to <code>registry_url</code>.</p>
<p class="tableblock">Used for both <code>[automationcontroller]</code> and <code>[automationhub]</code> groups.</p>
<p class="tableblock">Enter your Red Hat Registry Service Account credentials in <code>registry_username</code> and <code>registry_password</code> to link to the Red Hat container registry.</p>
<p class="tableblock">When <code>registry_url</code> is <code>registry.redhat.io</code>, username and password are required if not using a bundle installer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>registry_url</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used for both <code>[automationcontroller]</code> and <code>[automationhub]</code> groups.</p>
<p class="tableblock">Default = <code>registry.redhat.io</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>registry_username</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>registry_username</code> is only required if a non-bundle installer is used.</p>
<p class="tableblock">User credential for access to <code>registry_url</code>.</p>
<p class="tableblock">Used for both <code>[automationcontroller]</code> and <code>[automationhub]</code> groups, but only if the value of <code>registry_url</code> is <code>registry.redhat.io</code>.</p>
<p class="tableblock">Enter your Red Hat Registry Service Account credentials in <code>registry_username</code> and <code>registry_password</code> to link to the Red Hat container registry.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>routable_hostname</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>routable hostname</code> is used if the machine running the installer can only route to the target host through a specific URL, for example, if you use shortnames in your inventory, but the node running the installer can only resolve that host using FQDN.</p>
<p class="tableblock">If <code>routable_hostname</code> is not set, it should default to <code>ansible_host</code>. If you do not set <code>ansible_host</code>, <code>inventory_hostname</code> is used as a last resort.</p>
<p class="tableblock">This variable is used as a host variable for particular hosts and not under the <code>[all:vars]</code> section.
For further information, see <a href="https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#assigning-a-variable-to-one-machine-host-variables">Assigning a variable to one machine:host variables</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ref-hub-variables">A.2. Ansible automation hub variables</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Variable</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_admin_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p>
<p class="tableblock">Passwords must be enclosed in quotes when they are provided in plain text in the inventory file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_api_token</code></strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If upgrading from Ansible Automation Platform 2.0 or earlier, you must either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>provide an existing Ansible automation hub token as <code>automationhub_api_token</code>, or</p>
</li>
<li>
<p>set <code>generate_automationhub_token</code> to <code>true</code> to generate a new token</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Generating a new token invalidates the existing token.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_authentication_backend</code></strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This variable is not set by default.
Set it to <code>ldap</code> to use LDAP authentication.</p>
</div>
<div class="paragraph">
<p>When this is set to <code>ldap</code>, you must also set the following variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>automationhub_ldap_server_uri</code></p>
</li>
<li>
<p><code>automationhub_ldap_bind_dn</code></p>
</li>
<li>
<p><code>automationhub_ldap_bind_password</code></p>
</li>
<li>
<p><code>automationhub_ldap_user_search_base_dn</code></p>
</li>
<li>
<p><code>automationhub_ldap_group_search_base_dn</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If any of these are absent, the installation will be halted.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_auto_sign_collections</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a collection signing service is enabled, collections are not signed automatically by default.</p>
<p class="tableblock">Setting this parameter to <code>true</code> signs them by default.</p>
<p class="tableblock">Default = <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_backup_collections</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Ansible automation hub provides artifacts in <code>/var/lib/pulp</code>.
Automation controller automatically backs up the artifacts by default.</p>
<p class="tableblock">You can also set <code>automationhub_backup_collections = false</code> and the backup/restore process does not then backup or restore <code>/var/lib/pulp</code>.</p>
<p class="tableblock">Default = <code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_collection_download_count</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Determines whether download count is displayed on the UI.</p>
<p class="tableblock">Default = <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_collection_seed_repository</code></strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the bundle installer is run, validated content is uploaded to the <code>validated</code> repository, and certified content is uploaded to the <code>rh-certified</code> repository.</p>
</div>
<div class="paragraph">
<p>By default, both certified and validated content are uploaded.</p>
</div>
<div class="paragraph">
<p>Possible values of this variable are 'certified' or 'validated'.</p>
</div>
<div class="paragraph">
<p>If you do not want to install content, set <code>automationhub_seed_collections</code> to <code>false</code> to disable the seeding.</p>
</div>
<div class="paragraph">
<p>If you only want one type of content, set <code>automationhub_seed_collections</code> to <code>true</code> and <code>automationhub_collection_seed_repository</code> to the type of content you do want to include.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_collection_signing_service_key</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a collection signing service is enabled, you must provide this variable to ensure that collections can be properly signed.</p>
<p class="tableblock"><code>/absolute/path/to/key/to/sign</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_collection_signing_service_script</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a collection signing service is enabled, you must provide this variable to ensure that collections can be properly signed.</p>
<p class="tableblock"><code>/absolute/path/to/script/that/signs</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_create_default_collection_signing_service</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default install does not create a collection signing service.
If set to <code>true</code> a signing service is created.</p>
<p class="tableblock">Default = <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_container_signing_service_key</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a container signing service is enabled, you must provide this variable to ensure that containers can be properly signed.</p>
<p class="tableblock"><code>/absolute/path/to/key/to/sign</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_container_signing_service_script</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a container signing service is enabled, you must provide this variable to ensure that containers can be properly signed.</p>
<p class="tableblock"><code>/absolute/path/to/script/that/signs</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_create_default_container_signing_service</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default install does not create a container signing service.
If set to <code>true</code> a signing service is created.</p>
<p class="tableblock">Default = <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_disable_hsts</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default install deploys a TLS enabled Ansible automation hub.
Use if automation hub is deployed with <em>HTTP Strict Transport Security</em> (HSTS) web-security policy enabled.
Unless specified otherwise, the HSTS web-security policy mechanism is enabled.
This setting allows you to disable it if required.</p>
<p class="tableblock">Default = <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_disable_https</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">If Ansible automation hub is deployed with HTTPS enabled.</p>
<p class="tableblock">Default = <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_enable_api_access_log</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set to <code>true</code>, creates a log file at <code>/var/log/galaxy_api_access.log</code> that logs all user actions made to the platform, including their username and IP address.</p>
<p class="tableblock">Default = <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_enable_analytics</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean indicating whether to enable pulp analytics for the version of pulpcore used in automation hub in Ansible Automation Platform 2.4.</p>
<p class="tableblock">To enable pulp analytics, set <code>automationhub_enable_analytics = true</code>.</p>
<p class="tableblock">Default = <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_enable_unauthenticated_collection_access</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables unauthorized users to view collections.</p>
<p class="tableblock">To enable unauthorized users to view collections, set <code>automationhub_enable_unauthenticated_collection_access = true</code>.</p>
<p class="tableblock">Default = <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_enable_unauthenticated_collection_download</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables unauthorized users to download collections.</p>
<p class="tableblock">To enable unauthorized users to download collections, set <code>automationhub_enable_unauthenticated_collection_download = true</code>.</p>
<p class="tableblock">Default = <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_importer_settings</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Dictionary of setting to pass to galaxy-importer.</p>
<p class="tableblock">At import time collections can go through a series of checks.</p>
<p class="tableblock">Behavior is driven by <code>galaxy-importer.cfg</code> configuration.</p>
<p class="tableblock">Examples are <code>ansible-doc</code>, <code>ansible-lint</code>, and <code>flake8</code>.</p>
<p class="tableblock">This parameter enables you to drive this configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_main_url</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The main automation hub URL that clients connect to.</p>
<p class="tableblock">For example, https://&lt;load balancer host&gt;.</p>
<p class="tableblock">If not specified, the first node in the <code>[automationhub]</code> group is used.</p>
<p class="tableblock">Use <code>automationhub_main_url</code> to specify the main automation hub URL that clients connect to if you are implementing Red Hat Single Sign-On on your automation hub environment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_pg_database</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Required</em></p>
<p class="tableblock">The database name.</p>
<p class="tableblock">Default = <code>automationhub</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_pg_host</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required if not using internal database.</p>
<p class="tableblock">The hostname of the remote postgres database used by automation hub</p>
<p class="tableblock">Default = <code>127.0.0.1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_pg_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password for the automation hub PostgreSQL database.</p>
<p class="tableblock">Use of special characters for <code>automationhub_pg_password</code> is limited.
The <code>!</code>, <code>#</code>, <code>0</code> and <code>@</code> characters are supported.
Use of other special characters can cause the setup to fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_pg_port</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required if not using internal database.</p>
<p class="tableblock">Default = 5432</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_pg_sslmode</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p>
<p class="tableblock">Default = <code>prefer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_pg_username</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p>
<p class="tableblock">Default = <code>automationhub</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_require_content_approval</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Value is <code>true</code> if automation hub enforces the approval mechanism before collections are made available.</p>
<p class="tableblock">By default when you upload collections to automation hub an administrator must approve it before it is made available to the users.</p>
<p class="tableblock">If you want to disable the content approval flow, set the variable to <code>false</code>.</p>
<p class="tableblock">Default = <code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_seed_collections</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean that defines whether or not preloading is enabled.</p>
<p class="tableblock">When the bundle installer is run, validated content is uploaded to the <code>validated</code> repository, and certified content is uploaded to the <code>rh-certified</code> repository.</p>
<p class="tableblock">By default, both certified and validated content are uploaded.</p>
<p class="tableblock">If you do not want to install content, set <code>automationhub_seed_collections</code> to <code>false</code> to disable the seeding.</p>
<p class="tableblock">If you only want one type of content, set <code>automationhub_seed_collections</code> to <code>true</code> and <code>automationhub_collection_seed_repository</code> to the type of content you do want to include.</p>
<p class="tableblock">Default = <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ssl_cert</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock"><code>/path/to/automationhub.cert</code>
Same as <code>web_server_ssl_cert</code> but for automation hub UI and API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ssl_key</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock"><code>/path/to/automationhub.key</code></p>
<p class="tableblock">Same as <code>web_server_ssl_key</code> but for automation hub UI and API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ssl_validate_certs</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For Red Hat Ansible Automation Platform 2.2 and later, this value is no longer used.</p>
<p class="tableblock">Value is <code>true</code> if automation hub should validate certificate when requesting itself because by default, Ansible Automation Platform deploys with self-signed certificates.</p>
<p class="tableblock">Default = <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_upgrade</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Deprecated</strong></p>
<p class="tableblock">For Ansible Automation Platform 2.2.1 and later, the value of this has been fixed at true.</p>
<p class="tableblock">Automation hub always updates with the latest packages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_user_headers</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of nginx headers for Ansible automation hub&#8217;s web server.</p>
<p class="tableblock">Each element in the list is provided to the web server&#8217;s nginx configuration as a separate line.</p>
<p class="tableblock">Default = empty list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ee_from_hub_only</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When deployed with automation hub the installer pushes execution environment images to automation hub and configures automation controller to pull images from the automation hub registry.</p>
<p class="tableblock">To make automation hub the only registry to pull execution environment images from, set 'ee_from_hub_only' to <code>true</code>.</p>
<p class="tableblock">If set to <code>false</code>, execution environment images are also taken directly from Red Hat.</p>
<p class="tableblock">Default = <code>true</code> when the bundle installer is used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>generate_automationhub_token</code></strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If upgrading from Red Hat Ansible Automation Platform 2.0 or earlier, you must either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>provide an existing Ansible automation hub token as <code>automationhub_api_token</code> or</p>
</li>
<li>
<p>set <code>generate_automationhub_token</code> to <code>true</code> to generate a new token.
Generating a new token will invalidate the existing token.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>nginx_hsts_max_age</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable specifies how long, in seconds, the system should be considered as a <em>HTTP Strict Transport Security</em> (HSTS) host. That is, how long HTTPS is used exclusively for communication.</p>
<p class="tableblock">Default = 63072000 seconds, or two years.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>nginx_tls_protocols</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines support for <code>ssl_protocols</code> in Nginx.</p>
<p class="tableblock">Default = <code>TLSv1.2</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>pulp_db_fields_key</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relative or absolute path to the Fernet symmetric encryption key you want to import.
The path is on the Ansible management node.
It is used to encrypt certain fields in the database (such as credentials.)
If not specified, a new key will be generated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_automation_platform_login_theme</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed and externally managed Red Hat Single Sign-On.</p>
<p class="tableblock">Path to the directory where theme files are located.
If changing this variable, you must provide your own theme files.</p>
<p class="tableblock">Default = <code>ansible-automation-platform</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_automation_platform_realm</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed and externally managed Red Hat Single Sign-On.</p>
<p class="tableblock">The name of the realm in SSO.</p>
<p class="tableblock">Default = <code>ansible-automation-platform</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_automation_platform_realm_displayname</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed and externally managed Red Hat Single Sign-On.</p>
<p class="tableblock">Display name for the realm.</p>
<p class="tableblock">Default = <code>Ansible Automation Platform</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_console_admin_username</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed and externally managed Red Hat Single Sign-On.</p>
<p class="tableblock">SSO administration username.</p>
<p class="tableblock">Default = <code>admin</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_console_admin_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Required</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed and externally managed Red Hat Single Sign-On.</p>
<p class="tableblock">SSO administration password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_custom_keystore_file</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed Red Hat Single Sign-On only.</p>
<p class="tableblock">Customer-provided keystore for SSO.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_host</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Required</em></p>
<p class="tableblock">Used for Ansible Automation Platform externally managed Red Hat Single Sign-On only.</p>
<p class="tableblock">Automation hub requires SSO and SSO administration credentials for
authentication.</p>
<p class="tableblock">If SSO is not provided in the inventory for configuration, then you must use this variable to define the SSO host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_keystore_file_remote</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed Red Hat Single Sign-On only.</p>
<p class="tableblock">Set to <code>true</code> if the customer-provided keystore is on a remote node.</p>
<p class="tableblock">Default = <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_keystore_name</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed Red Hat Single Sign-On only.</p>
<p class="tableblock">Name of keystore for SSO.</p>
<p class="tableblock">Default = <code>ansible-automation-platform</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_keystore_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for keystore for HTTPS enabled SSO.</p>
<p class="tableblock">Required when using Ansible Automation Platform managed SSO and when HTTPS is enabled. The default install deploys SSO with <code>sso_use_https=true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_redirect_host</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed and externally managed Red Hat Single Sign-On.</p>
<p class="tableblock">If <code>sso_redirect_host</code> is set, it is used by the application to connect to SSO for authentication.</p>
<p class="tableblock">This must be reachable from client machines.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_ssl_validate_certs</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed and externally managed Red Hat Single Sign-On.</p>
<p class="tableblock">Set to <code>true</code> if the certificate is to be validated during connection.</p>
<p class="tableblock">Default = <code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>sso_use_https</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Used for Ansible Automation Platform managed and externally managed Red Hat Single Sign-On.</p>
<p class="tableblock">If Single Sign On uses https.</p>
<p class="tableblock">Default = <code>true</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For Ansible automation hub to connect to LDAP directly, you must configure the following variables:
A list of additional LDAP related variables that can be passed using the <code>ldap_extra_settings</code> variable, see the <a href="https://django-auth-ldap.readthedocs.io/en/latest/reference.html#settings">Django reference documentation</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Variable</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_bind_dn</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name to use when binding to the LDAP server with <code>automationhub_ldap_bind_password</code>.</p>
<p class="tableblock">Must be set when integrating private automation hub with LDAP, or the installation will fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_bind_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Required</em></p>
<p class="tableblock">The password to use with <code>automationhub_ldap_bind_dn</code>.</p>
<p class="tableblock">Must be set when integrating private automation hub  LDAP, or the installation will fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_group_search_base_dn</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An LDAP Search object that finds all LDAP groups that users might belong to.</p>
<p class="tableblock">If your configuration makes any references to LDAP groups, you must set this variable and <code>automationhub_ldap_group_type</code>.</p>
<p class="tableblock">Must be set when integrating private automation hub with LDAP, or the installation will fail.</p>
<p class="tableblock">Default = <code>None</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_group_search_filter</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Search filter for finding group membership.</p>
<p class="tableblock">Variable identifies what objectClass type to use for mapping groups with automation hub and LDAP.
Used for installing automation hub with LDAP.</p>
<p class="tableblock">Default = <code>(objectClass=Group)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_group_search_scope</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Scope to search for groups in an LDAP tree using the django framework for LDAP authentication.
Used for installing automation hub with LDAP.</p>
<p class="tableblock">Default = <code>SUBTREE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_group_type</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the type of group returned by <strong>automationhub_ldap_group_search</strong>.</p>
<p class="tableblock">This is set dynamically based on the the values of <strong>automationhub_ldap_group_type_params</strong> and <strong>automationhub_ldap_group_type_class</strong>, otherwise it is the default value coming from django-ldap which is 'None'</p>
<p class="tableblock">Default  = <code>django_auth_ldap.config:GroupOfNamesType</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_group_type_class</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">The importable path for the django-ldap group type class.</p>
<p class="tableblock">Variable identifies the group type used during group searches within the django framework for LDAP authentication.
Used for installing automation hub with LDAP.</p>
<p class="tableblock">Default =<code>django_auth_ldap.config:GroupOfNamesType</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_server_uri</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URI of the LDAP server.</p>
<p class="tableblock">Use any URI that is supported by your underlying LDAP libraries.</p>
<p class="tableblock">Must be set when integrating private automation hub  LDAP, or the installation will fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_user_search_base_dn</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An LDAP Search object that locates a user in the directory.
The filter parameter must contain the placeholder %(user)s for the username.
It must return exactly one result for authentication to succeed.</p>
<p class="tableblock">Must be set when integrating private automation hub with LDAP, or the installation will fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_user_search_filter</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Default = <code>'(uid=%(user)s)'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationhub_ldap_user-search_scope</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">Scope to search for users in an LDAP tree by using the django framework for LDAP authentication.
Used for installing automation hub with LDAP.</p>
<p class="tableblock">Default = <code>SUBTREE</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ref-controller-variables">A.3. Automation controller variables</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Variable</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>admin_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password for an administration user to access the UI when the installation is complete.</p>
<p class="tableblock">Passwords must be enclosed in quotes when they are provided in plain text in the inventory file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automation_controller_main_url</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For an alternative front end URL needed for SSO configuration, provide the URL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationcontroller_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for your automation controller instance.</p>
<p class="tableblock">Passwords must be enclosed in quotes when they are provided in plain text in the inventory file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationcontroller_username</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for your automation controller instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>nginx_http_port</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The nginx HTTP server listens for inbound connections.</p>
<p class="tableblock">Default = 80</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>nginx_https_port</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The nginx HTTPS server listens for secure connections.</p>
<p class="tableblock">Default = 443</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>nginx_hsts_max_age</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable specifies how long, in seconds, the system must be considered as a <em>HTTP Strict Transport Security</em> (HSTS) host. That is, how long HTTPS is used exclusively for communication.</p>
<p class="tableblock">Default = 63072000 seconds, or two years.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>nginx_tls_protocols</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines support for <code>ssl_protocols</code> in Nginx.</p>
<p class="tableblock">Default = <code>TLSv1.2</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>nginx_user_headers</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of nginx headers for the automation controller web server.</p>
<p class="tableblock">Each element in the list is provided to the web server&#8217;s nginx configuration as a separate line.</p>
<p class="tableblock">Default = empty list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>node_state</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">The status of a node or group of nodes.
Valid options are <code>active</code>, <code>deprovision</code> to remove a node from a cluster, or <code>iso_migrate</code> to migrate a legacy isolated node to an execution node.</p>
<p class="tableblock">Default = <code>active</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>node_type</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>[automationcontroller]</code> group.</p>
<p class="tableblock">Two valid <code>node_types</code> can be assigned for this group.</p>
<p class="tableblock">A <code>node_type=control</code> means that the node only runs project and inventory updates, but not regular jobs.</p>
<p class="tableblock">A <code>node_type=hybrid</code> can run everything.</p>
<p class="tableblock">Default for this group = <code>hybrid</code></p>
<p class="tableblock">For <code>[execution_nodes]</code> group:</p>
<p class="tableblock">Two valid <code>node_types</code> can be assigned for this group.</p>
<p class="tableblock">A <code>node_type=hop</code> implies that the node forwards jobs to an execution node.</p>
<p class="tableblock">A <code>node_type=execution</code> implies that the node can run jobs.</p>
<p class="tableblock">Default for this group = <code>execution</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>peers</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock">The <code>peers</code> variable is used to indicate which nodes a specific host or group connects to. Wherever  this variable is defined, an outbound connection to the specific host or group is established.</p>
<p class="tableblock">This variable is used to add <code>tcp-peer</code> entries in the <code>receptor.conf</code> file used for establishing network connections with other nodes.
See <a href="https://receptor.readthedocs.io/en/latest/connecting_nodes.html?highlight=tcp-peer">Peering</a></p>
<p class="tableblock">The peers variable can be a comma-separated list of hosts and groups from the inventory.
This is resolved into a set of hosts that is used to construct the <code>receptor.conf</code> file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>pg_database</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the postgres database.</p>
<p class="tableblock">Default = <code>awx</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>pg_host</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The postgreSQL host, which can be an externally managed database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>pg_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password for the postgreSQL database.</p>
<p class="tableblock">Use of special characters for <code>pg_password</code> is limited.
The <code>!</code>, <code>#</code>, <code>0</code> and <code>@</code> characters are supported.
Use of other special characters can cause the setup to fail.</p>
<p class="tableblock">NOTE</p>
<p class="tableblock">You no longer have to provide a <code>pg_hashed_password</code> in your inventory file at the time of installation because PostgreSQL 13 can now store user passwords more securely.</p>
<p class="tableblock">When you supply <code>pg_password</code> in the inventory file for the installer, PostgreSQL uses the SCRAM-SHA-256 hash to secure that password as part of the installation process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>pg_port</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The postgreSQL port to use.</p>
<p class="tableblock">Default = 5432</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>pg_ssl_mode</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose one of the two available modes: <code>prefer</code> and <code>verify-full</code>.</p>
<p class="tableblock">Set to <code>verify-full</code> for client-side enforced SSL.</p>
<p class="tableblock">Default = <code>prefer</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>pg_username</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your postgres database username.</p>
<p class="tableblock">Default = <code>awx</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>postgres_ssl_cert</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location of the postgres SSL certificate.</p>
<p class="tableblock"><code>/path/to/pgsql_ssl.cert</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>postgres_ssl_key</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location of the postgres SSL key.</p>
<p class="tableblock"><code>/path/to/pgsql_ssl.key</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>postgres_use_cert</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location of the postgres user certificate.</p>
<p class="tableblock"><code>/path/to/pgsql.crt</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>postgres_use_key</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location of the postgres user key.</p>
<p class="tableblock"><code>/path/to/pgsql.key</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>postgres_use_ssl</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use this variable if postgres uses SSL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>postgres_max_connections</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max database connections setting to apply if you are using installer-managed postgres. See the administration guide for help selecting a value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>receptor_listener_port</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port to use for recptor connection.</p>
<p class="tableblock">Default = 27199</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>supervisor_start_retry_count</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When specified, it adds <code>startretries = &lt;value specified&gt;</code> to the supervisor config file (/etc/supervisord.d/tower.ini).</p>
<p class="tableblock">See <a href="http://supervisord.org/configuration.html#program-x-section-values">program:x Section Values</a> for more information about <code>startretries</code>.</p>
<p class="tableblock">No default value exists.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>web_server_ssl_cert</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock"><code>/path/to/webserver.cert</code></p>
<p class="tableblock">Same as <code>automationhub_ssl_cert</code> but for web server UI and API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>web_server_ssl_key</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em></p>
<p class="tableblock"><code>/path/to/webserver.key</code></p>
<p class="tableblock">Same as <code>automationhub_server_ssl_key</code> but for web server UI and API.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ref-ansible-inventory-variables">A.4. Ansible variables</h3>
<div class="paragraph">
<p>The following variables control how Ansible Automation Platform interacts with remote hosts.</p>
</div>
<div class="paragraph">
<p>Additional information on variables specific to certain plugins can be found in the documentation for <a href="https://docs.ansible.com/ansible-core/devel/collections/ansible/builtin/index.html">Ansible.Builtin</a>.</p>
</div>
<div class="paragraph">
<p>A list of global configuration options can be found in <a href="https://docs.ansible.com/ansible-core/devel/reference_appendices/config.html">Ansible Configuration Settings</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Variable</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_connection</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The connection plugin used for the task on the target host.</p>
<p class="tableblock">This can be the name of any of ansible connection plugin.
SSH protocol types are <code>smart</code>, <code>ssh</code> or <code>paramiko</code>.</p>
<p class="tableblock">Default = <code>smart</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_host</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ip or name of the target host to use instead of <strong><code>inventory_hostname</code></strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_port</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The connection port number, if not, the default (22 for ssh).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_user</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user name to use when connecting to the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password to use to authenticate to the host.</p>
<p class="tableblock">Never store this variable in plain text.</p>
<p class="tableblock">Always use a vault.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_ssh_private_key_file</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Private key file used by ssh.
Useful if using multiple keys and you do not want to use an SSH agent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_ssh_common_args</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting is always appended to the default command line for <code>sftp</code>, <code>scp</code>, and <code>ssh</code>.
Useful to configure a ProxyCommand for a certain host (or group).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_sftp_extra_args</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting is always appended to the default <code>sftp</code> command line.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_scp_extra_args</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting is always appended to the default <code>scp</code> command line.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_ssh_extra_args</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting is always appended to the default <code>ssh</code> command line.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_ssh_pipelining</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines if SSH pipelining is used.
This can override the pipelining setting in <code>ansible.cfg</code>.
If using SSH key-based authentication, then the key must be managed by an SSH agent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_ssh_executable</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(added in version 2.2)</p>
<p class="tableblock">This setting overrides the default behavior to use the system ssh.
This can override the ssh_executable setting in <code>ansible.cfg</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_shell_type</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shell type of the target system.
You should not use this setting unless you have set the <code>ansible_shell_executable</code> to a non-Bourne (sh) compatible shell.
By default commands are formatted using sh-style syntax.
Setting this to <code>csh</code> or <code>fish</code> causes commands executed on target systems to follow the syntax of those shells instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>ansible_shell_executable</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This sets the shell that the ansible controller uses on the target machine, and overrides the executable in <code>ansible.cfg</code> which defaults to <code>/bin/sh</code>.</p>
<p class="tableblock">You should only change if it is not possible to use <code>/bin/sh</code>, that is, if <code>/bin/sh</code> is not installed on the target machine or cannot be run from sudo.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>inventory_hostname</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable takes the hostname of the machine from the inventory script or the ansible configuration file.</p>
<p class="tableblock">You cannot set the value of this variable.</p>
<p class="tableblock">Because the value is taken from the configuration file, the actual runtime hostname value can vary from what is returned by this variable.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="event-driven-ansible-controller_platform-install-scenario">A.5. Event-Driven Ansible controller variables</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Variable</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_admin_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The admin password used by the Event-Driven Ansible controller instance.</p>
<p class="tableblock">Passwords must be enclosed in quotes when they are provided in plain text in the inventory file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_admin_username</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username used by django to identify and create the admin superuser in Event-Driven Ansible controller.</p>
<p class="tableblock">Default = <code>admin</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_admin_email</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address used by django for the admin user for Event-Driven Ansible controller.</p>
<p class="tableblock">Default = <code>admin@example.com</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_allowed_hostnames</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of additional addresses to enable for user access to Event-Driven Ansible controller.</p>
<p class="tableblock">Default = empty list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_controller_verify_ssl</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag used to verify Automation Controller&#8217;s web certificates when making calls from Event-Driven Ansible controller. Verified is <code>true</code>; not verified is <code>false</code>.</p>
<p class="tableblock">Default = <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_disable_https</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to disable HTTPS Event-Driven Ansible controller.</p>
<p class="tableblock">Default = <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_disable_hsts</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to disable HSTS Event-Driven Ansible controller.</p>
<p class="tableblock">Default = <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_nginx_tls_files_remote</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to specify whether cert sources are on the remote host (true) or local (false).</p>
<p class="tableblock">Default = <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_user_headers</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of additional nginx headers to add to Event-Driven Ansible controller&#8217;s nginx configuration.</p>
<p class="tableblock">Default = empty list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_gunicorn_workers</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of workers for the API served through gunicorn.</p>
<p class="tableblock">Default = (# of cores or threads) * 2 + 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_pg_database</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The postgres database used by Event-Driven Ansible controller.</p>
<p class="tableblock">Default = <code>automtionedacontroller</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationnedacontroller_pg_host</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname of the postgres database used by Event-Driven Ansible controller, which can be an externally managed database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_pg_password</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password for the postgres database used by Event-Driven Ansible controller.</p>
<p class="tableblock">Use of special characters for <code>automationedacontroller_pg_password</code> is limited.
The <code>!</code>, <code>#</code>, <code>0</code> and <code>@</code> characters are supported.
Use of other special characters can cause the setup to fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_pg_port</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port number of the postgres database used by Event-Driven Ansible controller.</p>
<p class="tableblock">Default = <code>5432</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_pg_username</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username for your Event-Driven Ansible controller postgres database.</p>
<p class="tableblock">Default = <code>automationedacontroller</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><code>automationedacontroller_rq_workers</code></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of rq workers (Python processes that run in the background) used by Event-Driven Ansible controller.</p>
<p class="tableblock">Default =  (# of cores or threads) * 2 + 1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-10-27 09:45:47 +0100
</div>
</div>
</body>
</html>